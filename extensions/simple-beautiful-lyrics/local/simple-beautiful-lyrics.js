(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var t,e,a,r,i,n,o,s,c,l,d,u,m,f,y,p,g,b,h,v,S,C,k,L,w,x,M,A,O,T,E,P,I,B,D,F,_,R;a=new(e=class{constructor(){this.tasks=[],this.subCleanups=[]}AddTask(e,t){t&&this.Clean(t),this.tasks.push({id:t,task:e})}AddSubCleanup(e,t){return this.subCleanups.push({instance:e,id:t}),e}AddObserver(e,t){return this.AddTask(e.disconnect.bind(e),t),e}AddHtml(e,t){return this.AddTask(()=>{e.remove()},t),e}Clean(t){t?(this.tasks=this.tasks.filter(e=>e.id!==t||(e.task(),!1)),this.subCleanups=this.subCleanups.filter(e=>e.id!==t||(e.instance.Clean(),!1))):(this.tasks.forEach(e=>{e.task()}),this.subCleanups.forEach(e=>{e.instance.Clean()}),this.tasks=[])}}),r=!1,i=Spicetify.Player,n=Spicetify.showNotification,s=(o=Spicetify.Platform)?.History,c=Spicetify.Playbar,l=Spicetify.Snackbar,d=()=>{i=Spicetify.Player,n=Spicetify.showNotification,s=(o=Spicetify.Platform)?.History,c=Spicetify.Playbar,l=Spicetify.Snackbar,void 0!==i&&void 0!==n&&void 0!==o&&void 0!==s&&void 0!==c&&void 0!==l&&(r=!0)},u=class{constructor(){this.listeners=[]}Connect(e){return this.listeners.push(e),()=>this.Disconnect(e)}Disconnect(e){e=this.listeners.indexOf(e);-1<e&&this.listeners.splice(e,1)}Fire(){this.listeners.forEach(e=>e())}},m=new class{constructor(){this.SongChanged=new u,this.Started=!1}Start(){if(!0!==this.Started){this.Started=!0;let e=()=>{this.SongChanged.Fire()};i.addEventListener("songchange",e),a.AddTask(()=>i.removeEventListener("songchange",e)),void 0!==i.data&&e()}}},f=new u,(y=new Map).set("Default","brightness(0.5) saturate(2.5)"),y.set("SidePanel","brightness(1) saturate(2.25)"),p=15,g=0,b=()=>{var e;!i.data&&g<p?(setTimeout(b,100),g++):(g=0,(e=i.data?.item?.metadata)?(e={Large:e.image_xlarge_url,Big:e.image_large_url,Default:e.image_url,Small:e.image_small_url}).Default!==t?.Default&&(t=e,f.Fire()):console.warn("No metadata available for the current track.",i.data))},h=()=>t,(y=v=class{static findSetIndex(e,a=document.body){var r=v.ComponentClasses[e];if(r?.length)if(1===r.length)v.SetIndexMap[e]=0;else{let t=a.querySelector(v.ComponentSelectors[e]);if(t){a=r.findIndex(e=>t.classList.contains(e));if(-1!==a)return v.SetIndexMap[e]=a,void(v.ElementCache[e]=t)}r=(v.SetIndexMapTries[e]??0)+1;v.SetIndexMapTries[e]=r,v.MaxTries<=r&&(console.warn(`[SBL]: Failed to find class for ${e} after ${v.MaxTries} tries. Assuming default class.`),v.SetIndexMap[e]=0)}}static getComponent(e,t=document.body){var a=v.ElementCache[e];return a&&t.contains(a)?a:void 0===v.SetIndexMap[e]&&(v.findSetIndex(e,t),void 0===v.SetIndexMap[e])?null:(a=t.querySelector("."+v.ComponentClasses[e][v.SetIndexMap[e]]),v.ElementCache[e]=a)}static getComponents(e,t=document.body){return void 0===v.SetIndexMap[e]&&(v.findSetIndex(e,t),void 0===v.SetIndexMap[e])?document.createDocumentFragment().childNodes:t.querySelectorAll("."+v.ComponentClasses[e][v.SetIndexMap[e]])}static checkClassNamesMatch(t,e){return v.ComponentClasses[e].some(e=>t.contains(e))}}).ComponentClasses={FullScreenLyricsBackgroundClass:["lyrics-lyrics-background","RFThkjLuWfPUO9shrMOZ"],FullScreenLyricsContainerClass:["lyrics-lyrics-contentWrapper","t_dtt9KL1wnNRvRO_y5L"],MainLyricsContainerClass:["lyrics-lyrics-container","lofIAg8Ixko3mfBrbfej"],CinemaModeBackgroundToRemove:["x81eiLoZ5zWkSS1y28Oj"],CinemaModeContainerToInjectBackground:["x0lJCeJrx_56dJTWdATl"],LyricClass:["lyrics-lyricsContent-lyric","o69qODXrbOkf6Tv7fa51"],UnsyncedLyricClass:["lyrics-lyricsContent-unsynced","eTLjCqbDo7QehPEPz86a"],HighlightedLyricClass:["lyrics-lyricsContent-highlight","ve52ddYhoAd3Xf27Zxfm"],ActiveLyricClass:["lyrics-lyricsContent-active","_gZrl2ExJwyxPy1pEUG2"]},y.ComponentSelectors=Object.fromEntries(Object.entries(v.ComponentClasses).map(([e,t])=>[e,t.map(e=>"."+e).join(", ")])),y.SetIndexMap={},y.ElementCache={},y.SetIndexMapTries={},y.MaxTries=1e3,S=y,C=[],k=function(e,t){return e=setTimeout(()=>{t()},1e3*e),C.push(e),function(e){clearTimeout(e);e=C.indexOf(e);-1<e&&C.splice(e,1)}.bind(null,e)},L=4,w=.5,x=.25,M=.005,A=a.AddSubCleanup(new e,"Lyrics"),O=i=>{let o=new Map,n=0,s=(e,t)=>{e.style.fontSize="Active"==t.State?n+w+"rem":""},e=()=>{let t=0;for(var[e,a]of o){e=e.classList;S.checkClassNamesMatch(e,"ActiveLyricClass")?(a.State="Active",t=a.LayoutOrder):S.checkClassNamesMatch(e,"UnsyncedLyricClass")?a.State="Unsynced":S.checkClassNamesMatch(e,"HighlightedLyricClass")?a.State="Sung":a.State="Unsung"}for(var[r,i]of o){var n="Active"===i.State||"Unsynced"===i.State;let e;e=n||t<=1?0:Math.min(Math.abs(i.LayoutOrder-t),L);n=n?"var(--lyrics-color-active)":"Sung"===i.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";s(r,i),r.style.color="transparent",r.style.textShadow=`0 0 ${e}px `+n}},t=()=>{var e,t,a=getComputedStyle(i),r=getComputedStyle(document.documentElement),a=parseFloat(a.fontSize),r=parseFloat(r.fontSize);n=a/r;for([e,t]of o)s(e,t)};var a,r,c;for(a of i.childNodes)a instanceof HTMLDivElement&&S.checkClassNamesMatch(a.classList,"LyricClass")&&(r=a,c=void 0,c=Array.from(i.children).indexOf(r),A.AddObserver(new MutationObserver(()=>A.AddTask(k(M,e),"LyricUpdate"))).observe(r,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),o.set(r,{LayoutOrder:c,State:"Unsung"}));A.AddObserver(new ResizeObserver(()=>A.AddTask(k(x,t),"ContainerResize"))).observe(document.body),t(),e()},T=null,E=e=>{e=e?S.getComponent("FullScreenLyricsContainerClass",e):null;T!==e&&(T=null,A.Clean(),e)&&O(T=e)},P=["lyrics-background-color","lyrics-background-back","lyrics-background-back-center"],I=a.AddSubCleanup(new e,"LiveMainBackgrounds"),B=e=>{var t,a=I.AddHtml(document.createElement("div"));a.classList.add("lyrics-background-container");let r=[];for(t of P){var i=I.AddHtml(document.createElement("img"));i.classList.add(t),a.appendChild(i),r.push(i)}var n=()=>{var e,t=h()?.Default??"";for(e of r)e.src=t},n=(I.AddTask(f.Connect(n)),n(),()=>{e.classList.contains("lyrics-background")||e.classList.add("lyrics-background")});n(),I.AddObserver(new MutationObserver(n)).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),e.prepend(a),I.AddTask(()=>e.classList.remove("lyrics-background"))},F=D=null,_=e=>{var t=e?S.getComponent("FullScreenLyricsBackgroundClass",e):null;D!==t&&(null===t?(D=null,I.Clean()):(D=t,t=e?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.querySelector(".before-scroll-node"),F&&F!==e&&I.Clean(),F=e,t?B(t):(e=S.getComponent("CinemaModeContainerToInjectBackground",document.body))&&(t=I.AddHtml(document.createElement("div")),e.prepend(t),B(t))))},R=async function(){for(;!r&&!d();)await new Promise(e=>setTimeout(e,100));Spicetify.LocalStorage.remove("simple-beautiful-lyrics:cache-lyrics"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.api-endpoint"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.api-input-endpoint"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.api-token"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.api-token-input"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.cache-version"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.enable-debug"),1!=JSON.parse(Spicetify.LocalStorage.get("simple-beautiful-lyrics.override-fetch")||"{}")?.value||Spicetify.LocalStorage.get("more-lyrics.cache-version")||(Spicetify.showNotification('Simple Beautiful Lyrics: Feature adding more lyrics providers to Spotify page has been moved to "More Lyrics" extension.\nIf you still want to use this feature, please install the new extension from the marketplace.',!1,1e4),console.warn('Simple Beautiful Lyrics: Feature adding more lyrics providers to Spotify page has been moved to "More Lyrics" extension. If you still want to use this feature, please install the new extension from the marketplace.'),console.warn("Simple Beautiful Lyrics: If you want to disable this message, please do: `Spicetify.LocalStorage.remove('simple-beautiful-lyrics.override-fetch')`")),a.AddTask(m.SongChanged.Connect(b)),b(),m.Start(),a.AddObserver(new MutationObserver(()=>{var e=S.getComponents("MainLyricsContainerClass",document.body),e=1==e.length?e[0]:1<e.length?e[1]:null;_(e),E(e)})).observe(document.body,{attributes:!1,childList:!0,subtree:!0});var e=1==(e=S.getComponents("MainLyricsContainerClass",document.body)).length?e[0]:1<e.length?e[1]:null;_(e),e=e,a.AddTask(m.SongChanged.Connect(()=>T=null)),E(e)},(async()=>{await R()})(),(async()=>{var e;document.getElementById("simpleDbeautifulDlyrics")||((e=document.createElement("style")).id="simpleDbeautifulDlyrics",e.textContent=String.raw`
  @font-face{font-family:BeautifulLyrics;font-weight:400;src:url(https://fonts.socalifornian.live/LyricsRegular.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:500;src:url(https://fonts.socalifornian.live/LyricsMedium.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:600;src:url(https://fonts.socalifornian.live/LyricsSemibold.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:700;src:url(https://fonts.socalifornian.live/LyricsBold.woff2) format("woff2")}.MmIREVIj8A2aFVvBZ2Ev,.lyrics-lyricsContent-text{font-family:BeautifulLyrics,var(--encore-body-font-stack, var(--fallback-fonts, sans-serif)),sans-serif!important}.lyrics-lyrics-contentWrapper,.t_dtt9KL1wnNRvRO_y5L{--encore-text-size-larger-3:2.4rem;width:min(100% - 128px,1024px + 10%)!important}:root{--sbl-lyrics-background-gradient:linear-gradient(90deg, rgba(10, 10, 10, 0.54), rgba(0, 0, 0, 0))}.lyrics-lyricsContent-lyric:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important;text-decoration:none!important}.lyrics-lyricsContent-lyric{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important;font-weight:700;margin-bottom:.5em!important}.o69qODXrbOkf6Tv7fa51:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important;text-decoration:none!important}.o69qODXrbOkf6Tv7fa51{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important;font-weight:700;margin-bottom:.5em!important}.lyrics-lyricsContent-active{margin-top:-.25em!important;margin-bottom:.25em!important}._gZrl2ExJwyxPy1pEUG2{margin-top:-.25em!important;margin-bottom:.25em!important}.lyrics-lyrics-background{background-color:transparent!important;background-image:var(--sbl-lyrics-background-gradient)!important;background-size:cover;background-repeat:no-repeat}.RFThkjLuWfPUO9shrMOZ{background-color:transparent!important;background-image:var(--sbl-lyrics-background-gradient)!important;background-size:cover;background-repeat:no-repeat}.x81eiLoZ5zWkSS1y28Oj{animation:background-fadeout 2s ease-in-out forwards}.Root__main-view:has(.lyrics-background) .os-scrollbar,.os-host:has(.lyrics-background) .os-scrollbar{padding:5px}.Root__main-view:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle,.os-host:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle{mix-blend-mode:overlay;background-color:rgba(252,249,249,.117)!important}.lyrics-background{overflow:hidden;position:static}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-back-center,.lyrics-background-color{position:absolute;width:200%;animation:rotate 35s linear infinite;filter:blur(40px);border-radius:100em}.lyrics-background-color{right:0;top:0;z-index:10}.lyrics-background-back{left:0;bottom:0;z-index:1;animation-direction:reverse}.lyrics-background-back-center{z-index:0;width:300%;right:-50%;top:-20%;animation-direction:reverse}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes background-fadeout{0%{opacity:1}100%{opacity:0}}
      `.trim(),document.head.appendChild(e))})()})();