(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var t,A,n,_,r,R,V,e,a,j,s,i,o,l,c,d,u,p,z,$,H,f,W,h,q,m,y,J,g,b,v,U,G,X,Z,K,C,Q,S,Y,ee,k,te,w,L,ae,x,se,ie,ne,re,E,T,oe,I,N,B,F,le,ce,de,O,M,P,ue,pe,fe,D,he,me;A=Object.create,n=Object.defineProperty,_=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,a=(e,t,a)=>(a=null!=e?A(R(e)):{},((t,a,s,i)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of r(a))V.call(t,e)||e===s||n(t,e,{get:()=>a[e],enumerable:!(i=_(a,e))||i.enumerable});return t})(!t&&e&&e.__esModule?a:n(a,"default",{value:e,enumerable:!0}),e)),j=(e=(e,t)=>function(){return t||(0,e[r(e)[0]])((t={exports:{}}).exports,t),t.exports})({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),e=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),i=new(s=class{constructor(){this.tasks=[],this.subCleanups=[]}AddTask(e,t){t&&this.Clean(t),this.tasks.push({id:t,task:e})}AddSubCleanup(e,t){return this.subCleanups.push({instance:e,id:t}),e}AddObserver(e,t){return this.AddTask(e.disconnect.bind(e),t),e}AddHtml(e,t){return this.AddTask(()=>{e.remove()},t),e}Clean(t){t?(this.tasks=this.tasks.filter(e=>e.id!==t||(e.task(),!1)),this.subCleanups=this.subCleanups.filter(e=>e.id!==t||(e.instance.Clean(),!1))):(this.tasks.forEach(e=>{e.task()}),this.subCleanups.forEach(e=>{e.instance.Clean()}),this.tasks=[])}}),o=!1,l=Spicetify.Player,c=Spicetify.showNotification,u=(d=Spicetify.Platform)?.History,p=Spicetify.Playbar,z=Spicetify.Snackbar,$=()=>{l=Spicetify.Player,c=Spicetify.showNotification,u=(d=Spicetify.Platform)?.History,p=Spicetify.Playbar,z=Spicetify.Snackbar,void 0!==l&&void 0!==c&&void 0!==d&&void 0!==u&&void 0!==p&&void 0!==z&&(o=!0)},H=class{constructor(){this.listeners=[]}Connect(e){return this.listeners.push(e),()=>this.Disconnect(e)}Disconnect(e){e=this.listeners.indexOf(e);-1<e&&this.listeners.splice(e,1)}Fire(){this.listeners.forEach(e=>e())}},f=new class{constructor(){this.SongChanged=new H,this.Started=!1}Start(){if(!0!==this.Started){this.Started=!0;let e=()=>{this.SongChanged.Fire()};l.addEventListener("songchange",e),i.AddTask(()=>l.removeEventListener("songchange",e)),void 0!==l.data&&e()}}},W=new H,(h=new Map).set("Default","brightness(0.5) saturate(2.5)"),h.set("SidePanel","brightness(1) saturate(2.25)"),q=15,m=0,y=()=>{var e;!l.data&&m<q?(setTimeout(y,100),m++):(m=0,(e=l.data?.item?.metadata)?(e={Large:e.image_xlarge_url,Big:e.image_large_url,Default:e.image_url,Small:e.image_small_url}).Default!==t?.Default&&(t=e,W.Fire()):console.warn("No metadata available for the current track.",l.data))},J=()=>t,(h=g=class{static findSetIndex(e,a=document.body){var s=g.ComponentClasses[e];if(s?.length)if(1===s.length)g.SetIndexMap[e]=0;else{let t=a.querySelector(g.ComponentSelectors[e]);if(t){a=s.findIndex(e=>t.classList.contains(e));if(-1!==a)return g.SetIndexMap[e]=a,void(g.ElementCache[e]=t)}s=(g.SetIndexMapTries[e]??0)+1;g.SetIndexMapTries[e]=s,g.MaxTries<=s&&(console.warn(`[SBL]: Failed to find class for ${e} after ${g.MaxTries} tries. Assuming default class.`),g.SetIndexMap[e]=0)}}static getComponent(e,t=document.body){var a=g.ElementCache[e];return a&&t.contains(a)?a:void 0===g.SetIndexMap[e]&&(g.findSetIndex(e,t),void 0===g.SetIndexMap[e])?null:(a=t.querySelector("."+g.ComponentClasses[e][g.SetIndexMap[e]]),g.ElementCache[e]=a)}static getComponents(e,t=document.body){return void 0===g.SetIndexMap[e]&&(g.findSetIndex(e,t),void 0===g.SetIndexMap[e])?document.createDocumentFragment().childNodes:t.querySelectorAll("."+g.ComponentClasses[e][g.SetIndexMap[e]])}static checkClassNamesMatch(t,e){return g.ComponentClasses[e].some(e=>t.contains(e))}}).ComponentClasses={FullScreenLyricsBackgroundClass:["lyrics-lyrics-background","RFThkjLuWfPUO9shrMOZ"],FullScreenLyricsContainerClass:["lyrics-lyrics-contentWrapper","t_dtt9KL1wnNRvRO_y5L"],MainLyricsContainerClass:["lyrics-lyrics-container","lofIAg8Ixko3mfBrbfej"],CinemaModeBackgroundToRemove:["x81eiLoZ5zWkSS1y28Oj"],CinemaModeContainerToInjectBackground:["x0lJCeJrx_56dJTWdATl"],LyricClass:["lyrics-lyricsContent-lyric","o69qODXrbOkf6Tv7fa51"],UnsyncedLyricClass:["lyrics-lyricsContent-unsynced","eTLjCqbDo7QehPEPz86a"],HighlightedLyricClass:["lyrics-lyricsContent-highlight","ve52ddYhoAd3Xf27Zxfm"],ActiveLyricClass:["lyrics-lyricsContent-active","_gZrl2ExJwyxPy1pEUG2"]},h.ComponentSelectors=Object.fromEntries(Object.entries(g.ComponentClasses).map(([e,t])=>[e,t.map(e=>"."+e).join(", ")])),h.SetIndexMap={},h.ElementCache={},h.SetIndexMapTries={},h.MaxTries=1e3,b=h,v=[],U=function(e,t){return e=setTimeout(()=>{t()},1e3*e),v.push(e),function(e){clearTimeout(e);e=v.indexOf(e);-1<e&&v.splice(e,1)}.bind(null,e)},G=4,X=.5,Z=.25,K=.005,C=i.AddSubCleanup(new s,"Lyrics"),Q=i=>{let r=new Map,n=0,o=(e,t)=>{e.style.fontSize="Active"==t.State?n+X+"rem":""},e=()=>{let t=0;for(var[e,a]of r){e=e.classList;b.checkClassNamesMatch(e,"ActiveLyricClass")?(a.State="Active",t=a.LayoutOrder):b.checkClassNamesMatch(e,"UnsyncedLyricClass")?a.State="Unsynced":b.checkClassNamesMatch(e,"HighlightedLyricClass")?a.State="Sung":a.State="Unsung"}for(var[s,i]of r){var n="Active"===i.State||"Unsynced"===i.State;let e;e=n||t<=1?0:Math.min(Math.abs(i.LayoutOrder-t),G);n=n?"var(--lyrics-color-active)":"Sung"===i.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";o(s,i),s.style.color="transparent",s.style.textShadow=`0 0 ${e}px `+n}},t=()=>{var e,t,a=getComputedStyle(i),s=getComputedStyle(document.documentElement),a=parseFloat(a.fontSize),s=parseFloat(s.fontSize);n=a/s;for([e,t]of r)o(e,t)};var a,s,l;for(a of i.childNodes)a instanceof HTMLDivElement&&b.checkClassNamesMatch(a.classList,"LyricClass")&&(s=a,l=void 0,l=Array.from(i.children).indexOf(s),C.AddObserver(new MutationObserver(()=>C.AddTask(U(K,e),"LyricUpdate"))).observe(s,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),r.set(s,{LayoutOrder:l,State:"Unsung"}));C.AddObserver(new ResizeObserver(()=>C.AddTask(U(Z,t),"ContainerResize"))).observe(document.body),t(),e()},S=null,Y=e=>{e=e?b.getComponent("FullScreenLyricsContainerClass",e):null;S!==e&&(S=null,C.Clean(),e)&&Q(S=e)},ee=["lyrics-background-color","lyrics-background-back","lyrics-background-back-center"],k=i.AddSubCleanup(new s,"LiveMainBackgrounds"),te=e=>{var t,a=k.AddHtml(document.createElement("div"));a.classList.add("lyrics-background-container");let s=[];for(t of ee){var i=k.AddHtml(document.createElement("img"));i.classList.add(t),a.appendChild(i),s.push(i)}var n=()=>{var e,t=J()?.Default??"";for(e of s)e.src=t},n=(k.AddTask(W.Connect(n)),n(),()=>{e.classList.contains("lyrics-background")||e.classList.add("lyrics-background")});n(),k.AddObserver(new MutationObserver(n)).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),e.prepend(a),k.AddTask(()=>e.classList.remove("lyrics-background"))},L=w=null,ae=e=>{var t=e?b.getComponent("FullScreenLyricsBackgroundClass",e):null;w!==t&&(null===t?(w=null,k.Clean()):(w=t,t=e?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.querySelector(".before-scroll-node"),L&&L!==e&&k.Clean(),L=e,t?te(t):(e=b.getComponent("CinemaModeContainerToInjectBackground",document.body))&&((t=b.getComponent("CinemaModeBackgroundToRemove",e))&&(t.style.background="none"),t=k.AddHtml(document.createElement("div")),e.prepend(t),te(t))))},x=a(j()),se=a(e()),ie=class{constructor(e,t){this.name=e,this.settingsId=t,this.settingsFields={},this.setRerender=null,this.areClassNamesInitialized=!1,this.spotifyClasses={},this.pushSettings=async()=>{for(Object.entries(this.settingsFields).forEach(([e,t])=>{"button"!==t.type&&void 0===this.getFieldValue(e)&&this.setFieldValue(e,t.defaultValue)});!Spicetify?.Platform?.History?.listen;)await new Promise(e=>setTimeout(e,100));this.stopHistoryListener&&this.stopHistoryListener(),this.stopHistoryListener=Spicetify.Platform.History.listen(e=>{"/preferences"===e.pathname&&this.render()}),"/preferences"===Spicetify.Platform.History.location.pathname&&await this.render()},this.rerender=()=>{this.setRerender&&this.setRerender(Math.random())},this.getClassByPath=(t,a,s)=>{try{let e=t;for(var i of a){if(!e?.childNodes?.[i])return s;e=e.childNodes[i]}return e.className||s}catch(e){return console.error("[spcr-settings] Error getting class by path:",e),s}},this.initSpotifyClasses=e=>{this.areClassNamesInitialized||(this.spotifyClasses={settingsSection:this.getClassByPath(e,[1],"x-settings-section"),sectionTitle:this.getClassByPath(e,[1,0],"e-91000-text encore-text-body-medium-bold encore-internal-color-text-base"),settingsRow:this.getClassByPath(e,[1,1],"x-settings-row"),firstColumn:this.getClassByPath(e,[1,1,0],"x-settings-firstColumn"),settingLabel:this.getClassByPath(e,[1,1,0,0],"e-91000-text encore-text-body-small encore-internal-color-text-subdued"),secondColumn:this.getClassByPath(e,[1,1,1],"x-settings-secondColumn"),button:this.getClassByPath(e,[8,4,0],"Button-sc-y0gtbx-0 Button-buttonSecondary-small-useBrowserDefaultFocusStyle encore-text-body-small-bold e-9640-button--small x-settings-button"),toggleDivWrapper:this.getClassByPath(e,[3,1,1,0],""),toggleWrapper:this.getClassByPath(e,[3,1,1,0,0],"x-toggle-wrapper"),toggleInput:this.getClassByPath(e,[3,1,1,0,0,0],"x-toggle-input"),toggleIndicatorWrapper:this.getClassByPath(e,[3,1,1,0,0,1],"x-toggle-indicatorWrapper"),toggleIndicator:this.getClassByPath(e,[3,1,1,0,0,1,0],"x-toggle-indicator"),mainDropDown:this.getClassByPath(e,[5,1,1,0,0],"main-dropDown-dropDown"),textInput:"e-91000-form-input e-91000-baseline e-91000-form-control encore-text-body-medium main-topBar-searchBar Mx356zpxhMqMxje_7QXv",settingsSingleColumn:this.getClassByPath(e,[13,1],"k5yrn4bTRFh4dMUyEtX2"),groupContainer:this.getClassByPath(e,[13,1,0],"Group-sc-u9bcx5-0 Group-formGroup rSF8UwLzWlq43BzcPjy9"),groupLabel:this.getClassByPath(e,[13,1,0,0],"LabelGroup-sc-1ibddrg-0 LabelGroup encore-text-body-small-bold"),labelContainer:this.getClassByPath(e,[13,1,0,0,0],"Label-sc-1c0cv3r-0 klvvqC"),labelInner:this.getClassByPath(e,[13,1,0,0,0,0],"LabelInner-sc-19pye2k-0 cCdxWn")},this.areClassNamesInitialized=!0,console.log("[spcr-settings] Initialized Spotify class names:",this.spotifyClasses))},this.render=async()=>{for(;!document.getElementById("desktop.settings.selectLanguage");){if("/preferences"!==Spicetify.Platform.History.location.pathname)return;await new Promise(e=>setTimeout(e,100))}var e=document.querySelector(".main-view-container__scroll-node-child main div");if(!e)return console.error("[spcr-settings] settings container not found");this.initSpotifyClasses(e);let t=Array.from(e.children).find(e=>e.id===this.settingsId);t||((t=document.createElement("div")).id=this.settingsId,e.appendChild(t)),se.default.render(x.default.createElement(this.FieldsContainer,null),t)},this.addButton=(e,t,a,s,i)=>{this.settingsFields[e]={type:"button",description:t,value:a,events:{onClick:s,...i}}},this.addInput=(e,t,a,s,i,n,r)=>{this.settingsFields[e]={type:"input",description:t,defaultValue:a,inputType:n,floatLeft:s,events:{onChange:i,...r}}},this.addHidden=(e,t)=>{this.settingsFields[e]={type:"hidden",defaultValue:t}},this.addToggle=(e,t,a,s,i)=>{this.settingsFields[e]={type:"toggle",description:t,defaultValue:a,events:{onChange:s,...i}}},this.addDropDown=(e,t,a,s,i,n,r)=>{this.settingsFields[e]={type:"dropdown",description:t,defaultValue:a[s],options:a,floatLeft:i,events:{onSelect:n,...r}}},this.getFieldValue=e=>JSON.parse(Spicetify.LocalStorage.get(this.settingsId+"."+e)||"{}")?.value,this.setFieldValue=(e,t)=>{Spicetify.LocalStorage.set(this.settingsId+"."+e,JSON.stringify({value:t}))},this.FieldsContainer=()=>{var[e,t]=(0,x.useState)(0);return this.setRerender=t,x.default.createElement("div",{className:this.spotifyClasses.settingsSection,key:e},x.default.createElement("h2",{className:this.spotifyClasses.sectionTitle},this.name),Object.entries(this.settingsFields).map(([e,t])=>x.default.createElement(this.Field,{nameId:e,field:t})))},this.Field=a=>{var e=this.settingsId+"."+a.nameId;let t;if(t="button"===a.field.type?a.field.value:this.getFieldValue(a.nameId),"hidden"===a.field.type)return x.default.createElement(x.default.Fragment,null);let[s,i]=(0,x.useState)(t),n=e=>{void 0!==e&&(i(e),this.setFieldValue(a.nameId,e))};return"input"!==a.field.type&&"dropdown"!==a.field.type||!a.field.floatLeft?x.default.createElement("div",{className:this.spotifyClasses.settingsRow},x.default.createElement("div",{className:this.spotifyClasses.firstColumn},x.default.createElement("label",{className:this.spotifyClasses.settingLabel,htmlFor:e},a.field.description||"")),x.default.createElement("div",{className:this.spotifyClasses.secondColumn},"input"===a.field.type?x.default.createElement("input",{className:this.spotifyClasses.textInput,id:e,dir:"ltr",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:s,type:a.field.inputType||"text",placeholder:a.field.defaultValue,...a.field.events,onChange:e=>{n(e.currentTarget.value);var t=a.field.events?.onChange;t&&t(e)}}):"button"===a.field.type?x.default.createElement("span",null,x.default.createElement("button",{id:e,className:this.spotifyClasses.button,"data-encore-id":"buttonSecondary",...a.field.events,onClick:e=>{n();var t=a.field.events?.onClick;t&&t(e)},type:"button"},s)):"toggle"===a.field.type?x.default.createElement("div",{className:this.spotifyClasses.toggleDivWrapper},x.default.createElement("label",{className:this.spotifyClasses.toggleWrapper},x.default.createElement("input",{id:e,className:this.spotifyClasses.toggleInput,type:"checkbox",checked:s,...a.field.events,onClick:e=>{n(e.currentTarget.checked);var t=a.field.events?.onClick;t&&t(e)}}),x.default.createElement("span",{className:this.spotifyClasses.toggleIndicatorWrapper},x.default.createElement("span",{className:this.spotifyClasses.toggleIndicator})))):"dropdown"===a.field.type?x.default.createElement("span",null,x.default.createElement("select",{className:this.spotifyClasses.mainDropDown,id:e,...a.field.events,onChange:e=>{n(a.field.options[e.currentTarget.selectedIndex]);var t=a.field.events?.onChange;t&&t(e)}},a.field.options.map((e,t)=>x.default.createElement("option",{selected:e===s,value:t+1},e)))):x.default.createElement(x.default.Fragment,null))):x.default.createElement("div",{className:this.spotifyClasses.settingsSingleColumn},x.default.createElement("div",{className:this.spotifyClasses.groupContainer},x.default.createElement("div",{className:this.spotifyClasses.groupLabel},x.default.createElement("label",{className:this.spotifyClasses.labelContainer,htmlFor:e},x.default.createElement("span",{className:this.spotifyClasses.labelInner},a.field.description||""))),"input"===a.field.type?x.default.createElement("input",{className:this.spotifyClasses.textInput,id:e,dir:"ltr",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:s,type:a.field.inputType||"text",placeholder:a.field.defaultValue,...a.field.events,onChange:e=>{n(e.currentTarget.value);var t=a.field.events?.onChange;t&&t(e)}}):x.default.createElement("span",null,x.default.createElement("select",{className:this.spotifyClasses.mainDropDown,id:e,...a.field.events,onChange:e=>{n(a.field.options[e.currentTarget.selectedIndex]);var t=a.field.events?.onChange;t&&t(e)}},a.field.options.map((e,t)=>x.default.createElement("option",{selected:e===s,value:t+1},e))))))}}},ne=!1,re=e=>{ne=e},E=(...e)=>ne&&console.log("[SBL]:",...e),T=window.fetch,oe=100,I="simple-beautiful-lyrics:cache-lyrics",N=[],F=B=0,le=e=>JSON.parse(Spicetify.LocalStorage.get("simple-beautiful-lyrics."+e)||"{}")?.value,ce=()=>{B>Number.MAX_SAFE_INTEGER-1001&&(B=0),Number.MAX_SAFE_INTEGER-1002<F&&(F=0)},de=async e=>{for(var t=Date.now();F<e;){if(7500<Date.now()-t)throw new Error("Timeout in waitForTurn");await new Promise(e=>setTimeout(e,100))}},O=()=>{Spicetify.LocalStorage.set(I,JSON.stringify(N)),E("Lyrics Data Bank saved to cache")},M=t=>{N.some(e=>e.gid===t.gid)?E(`Lyrics already exist in 'bank' <${t.gid}>`):(N.length>=oe&&(N.shift(),E("Lyrics Data Bank overflowed, removing oldest entry")),N.push(t),O())},P=()=>{N.length=0,Spicetify.LocalStorage.remove(I),E("Lyrics Data Bank cleared")},ue=()=>{var e=Spicetify.LocalStorage.get(I);if(e)try{N.length=0,N.push(...JSON.parse(e)),E("Lyrics Data Bank loaded from cache")}catch(e){console.error("[SBL]: Error while parsing cached data",e),P()}},pe=async(...i)=>{var n=i[0];if("string"==typeof n){if(n.startsWith("https://spclient.wg.spotify.com/color-lyrics/v2/track/")){let s=n.split("/").at(6);if(s){ce();try{await de(B++)}catch(e){return console.error("[SBL]:",e),F++,T(...i)}var r=N.find(e=>e.canonical_ids.includes(s));if(r)return F++,r.data?(E(`Lyrics found in 'bank' <${s}>`),new Response(JSON.stringify(r.data),{status:200,statusText:"OK",headers:new Headers({"Content-Type":"application/json"})})):(E(`Lyrics were found in spotify as available <${s}>`),T(...i));F++;let t=Spicetify.Queue.track?.contextTrack;r=t?.uri?.split(":").at(-1);let a=Spicetify.Queue.nextTracks?.[0]?.contextTrack;var o=a?.uri?.split(":").at(-1),l=N.slice(-5).filter(e=>e.metadata);if(r===s){r=l.find(e=>e.metadata?.artist_name===t.metadata.artist_name&&e.metadata?.title===t.metadata.title);if(r)return r.canonical_ids.push(s),O(),E(`Lyrics found in 'bank' after parse <${s}>`),new Response(JSON.stringify(r.data),{status:200,statusText:"OK",headers:new Headers({"Content-Type":"application/json"})})}else if(o===s){r=l.find(e=>e.metadata?.artist_name===a.metadata.artist_name&&e.metadata?.title===a.metadata.title);if(r)return r.canonical_ids.push(s),O(),E(`Lyrics found in 'bank' after parse <${s}>`),new Response(JSON.stringify(r.data),{status:200,statusText:"OK",headers:new Headers({"Content-Type":"application/json"})})}E(`Lyrics not found in 'bank' after parse <${s}>`)}else console.error("[SBL]: Canonical ID not found in 'color-lyrics' fetch");return T(...i)}if(n.startsWith("https://spclient.wg.spotify.com/metadata/4/track/")){let t=n.split("/").at(6)?.split("?").at(0);if(!t)return console.error("[SBL]: GID not found in 'metadata' fetch"),T(...i);ce();try{await de(B++)}catch(e){return console.error("[SBL]:",e),F++,T(...i)}o=N.find(e=>e.gid===t);if(o)return F++,o.data?(E(`Lyrics found in 'bank' when fetching for 'metadata' <${t}>`),(r=await(l=await T(...i)).clone().json()).has_lyrics=!0,new Response(JSON.stringify(r),{status:l.status,statusText:l.statusText,headers:l.headers})):(E(`Lyrics found in 'bank' but no data when fetching for 'metadata' <${t}>`),T(...i));let e,a;try{e=await T(...i),a=await e.clone().json()}catch(e){return console.error("[SBL]: Error while fetching metadata",e),F++,T(...i)}n=a.canonical_uri.split(":").at(-1);if(a.has_lyrics)return E(`Lyrics found in 'metadata' <${t}>`),M({gid:t,canonical_ids:[n]}),F++,e;o=le("api-token"),r=await T(`${le("api-endpoint")??"https://lyrics.kamiloo13.me"}/get?artist=${a.artist[0].name}&track=${a.name}&duration=${Math.round(a.duration/1e3)}&album=${a.album.name}&username=`+Spicetify.Platform.username,o?{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}}:void 0).catch(()=>null),l=await r?.json().catch(()=>null);if(F++,!l||!r?.ok)return E(`Lyrics NOT found in 'lyrics.kamiloo13.me' <${t}>`),M({gid:t,canonical_ids:[n]}),e;E(`Lyrics found in 'lyrics.kamiloo13.me' <${t}>`);o={colors:{background:-10848593,highlightText:-1,text:-16777216},hasVocalRemoval:!1,lyrics:{alternatives:[],capStatus:"NONE",isDenseTypeface:!1,isRtlLanguage:!1,language:a.language_of_performance[0],lines:l.lines,previewLines:l.lines.slice(0,5),provider:l.provider,providerDisplayName:l.providerLyricsDisplayName+" (simple-beautiful-lyrics)",providerLyricsId:l.providerLyricsId,syncLyricsUri:"",syncType:l.isSynced?"LINE_SYNCED":"UNSYNCED"}};return M({gid:t,canonical_ids:[n],data:o,metadata:{artist_name:a.artist[0].name,title:a.name}}),a.has_lyrics=!0,new Response(JSON.stringify(a),{status:e.status,statusText:e.statusText,headers:e.headers})}}return T(...i)},fe=e=>{window.fetch=e?pe:T,E("Fetch override is now "+(e?"enabled":"disabled")),E(`Lyrics Data Bank had ${N.length} entries`,N),e?(ue(),F=B=0,E("Request count: "+B),E("Current request ID: "+F)):(N.length=0,E("Request count: "+B),E("Current request ID: "+F),B=Number.MAX_SAFE_INTEGER-1e3,F=Number.MAX_SAFE_INTEGER-1e3),E(`Lyrics Data Bank has now ${N.length} entries`,N)},D="https://lyrics.kamiloo13.me/api",he=/^https?:\/\/([\w-]+(\.[\w-]+)+|localhost)(:[0-9]{1,5})?(\/[^\s\?]*)?$/,me=async function(){let a=new ie("Simple Beautiful Lyrics","simple-beautiful-lyrics");var e=a.getFieldValue("api-endpoint");for(he.test(e)?a.setFieldValue("api-input-endpoint",e):(a.setFieldValue("api-endpoint",D),a.setFieldValue("api-input-endpoint",D)),a.addToggle("override-fetch","Override Spotify's 'fetch' function to enable searching for alternative lyric sources (app refresh recommended)",!0,()=>{var e=Boolean(a.getFieldValue("override-fetch"));fe(e)}),a.addInput("api-input-endpoint",`API Endpoint (default: ${D})`,D,!1,()=>{},"text",{onBlur:e=>{var t=e.target.value;4<t.length&&t===a.getFieldValue("api-endpoint")||(he.test(t)?(a.setFieldValue("api-endpoint",t),Spicetify.showNotification("API Endpoint saved!")):(e.target.value=D,a.setFieldValue("api-endpoint",D),a.setFieldValue("api-input-endpoint",t),Spicetify.showNotification("Invalid API Endpoint. Default value restored.")))}}),a.addHidden("api-token",""),a.addInput("api-token-input","API Token (optional)","",!0,()=>{},"text",{onBlur:e=>{e=e.target.value;e!==a.getFieldValue("api-token")&&(a.setFieldValue("api-token",e),Spicetify.showNotification("API Token saved!"))}}),a.addToggle("enable-debug","Enable debug logging",!1,()=>{re(Boolean(a.getFieldValue("enable-debug")))}),a.addButton("clear-cache","Clear Lyrics Cache","Clear",()=>{P(),Spicetify.showNotification("Lyrics cache cleared!")}),a.pushSettings(),"1"!==(e=a.getFieldValue("cache-version"))&&(a.setFieldValue("cache-version","1"),P()),re(Boolean(a.getFieldValue("enable-debug"))),fe(Boolean(a.getFieldValue("override-fetch")));!o&&!$();)await new Promise(e=>setTimeout(e,100));i.AddTask(f.SongChanged.Connect(y)),y(),f.Start(),i.AddObserver(new MutationObserver(()=>{var e=b.getComponents("MainLyricsContainerClass",document.body),e=1==e.length?e[0]:1<e.length?e[1]:null;ae(e),Y(e)})).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),e=1==(e=b.getComponents("MainLyricsContainerClass",document.body)).length?e[0]:1<e.length?e[1]:null,ae(e),e=e,i.AddTask(f.SongChanged.Connect(()=>S=null)),Y(e)},(async()=>{await me()})(),(async()=>{var e;document.getElementById("simpleDbeautifulDlyrics")||((e=document.createElement("style")).id="simpleDbeautifulDlyrics",e.textContent=String.raw`
  @font-face{font-family:BeautifulLyrics;font-weight:400;src:url(https://fonts.socalifornian.live/LyricsRegular.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:500;src:url(https://fonts.socalifornian.live/LyricsMedium.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:600;src:url(https://fonts.socalifornian.live/LyricsSemibold.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:700;src:url(https://fonts.socalifornian.live/LyricsBold.woff2) format("woff2")}.MmIREVIj8A2aFVvBZ2Ev,.lyrics-lyricsContent-text{font-family:BeautifulLyrics,var(--encore-body-font-stack, var(--fallback-fonts, sans-serif)),sans-serif!important}.lyrics-lyrics-contentWrapper,.t_dtt9KL1wnNRvRO_y5L{--encore-text-size-larger-3:2.4rem;width:min(100% - 128px,1024px + 10%)!important}:root{--sbl-lyrics-background-gradient:linear-gradient(90deg, rgba(10, 10, 10, 0.54), rgba(0, 0, 0, 0))}.lyrics-lyricsContent-lyric:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important;text-decoration:none!important}.lyrics-lyricsContent-lyric{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important;font-weight:700;margin-bottom:.5em!important}.o69qODXrbOkf6Tv7fa51:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important;text-decoration:none!important}.o69qODXrbOkf6Tv7fa51{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important;font-weight:700;margin-bottom:.5em!important}.lyrics-lyricsContent-active{margin-top:-.25em!important;margin-bottom:.25em!important}._gZrl2ExJwyxPy1pEUG2{margin-top:-.25em!important;margin-bottom:.25em!important}.lyrics-lyrics-background{background-color:transparent!important;background-image:var(--sbl-lyrics-background-gradient)!important;background-size:cover;background-repeat:no-repeat}.RFThkjLuWfPUO9shrMOZ{background-color:transparent!important;background-image:var(--sbl-lyrics-background-gradient)!important;background-size:cover;background-repeat:no-repeat}.Root__main-view:has(.lyrics-background) .os-scrollbar,.os-host:has(.lyrics-background) .os-scrollbar{padding:5px}.Root__main-view:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle,.os-host:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle{mix-blend-mode:overlay;background-color:rgba(252,249,249,.117)!important}.lyrics-background{overflow:hidden;position:static}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-back-center,.lyrics-background-color{position:absolute;width:200%;animation:rotate 35s linear infinite;filter:blur(40px);border-radius:100em}.lyrics-background-color{right:0;top:0;z-index:10}.lyrics-background-back{left:0;bottom:0;z-index:1;animation-direction:reverse}.lyrics-background-back-center{z-index:0;width:300%;right:-50%;top:-20%;animation-direction:reverse}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
      `.trim(),document.head.appendChild(e))})()})();