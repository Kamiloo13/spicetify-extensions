!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));(()=>{var r,e=class{constructor(){this.tasks=[],this.subCleanups=[]}AddTask(e,t){t&&this.Clean(t),this.tasks.push({id:t,task:e})}AddSubCleanup(e,t){return this.subCleanups.push({instance:e,id:t}),e}AddObserver(e,t){return this.AddTask(e.disconnect.bind(e),t),e}AddHtml(e,t){return this.AddTask(()=>{e.remove()},t),e}Clean(t){t?(this.tasks=this.tasks.filter(e=>e.id!==t||(e.task(),!1)),this.subCleanups=this.subCleanups.filter(e=>e.id!==t||(e.instance.Clean(),!1))):(this.tasks.forEach(e=>{e.task()}),this.subCleanups.forEach(e=>{e.instance.Clean()}),this.tasks=[])}},a=new e,i=!1;{let e,t;for(var n of document.getElementsByTagName("script"))n.src.includes("simple-beautiful-lyrics.js")&&(n.src.startsWith("https://xpui.app.spotify.com/")?void 0===t?t=n:n.remove():void 0===e?e=n:n.remove());r=void 0===t?e:(i=!0,void 0!==e&&e.remove(),t)}var t=!1,s=Spicetify.Player,o=Spicetify.showNotification,l=Spicetify.Platform,c=l?.History,d=Spicetify.Playbar,u=Spicetify.Snackbar,U=()=>{s=Spicetify.Player,o=Spicetify.showNotification,l=Spicetify.Platform,c=l?.History,d=Spicetify.Playbar,u=Spicetify.Snackbar,void 0!==s&&void 0!==o&&void 0!==l&&void 0!==c&&void 0!==d&&void 0!==u&&(t=!0)},H=(e,t,r)=>{u.enqueueSnackbar(Spicetify.React.createElement("div",{dangerouslySetInnerHTML:{__html:e.trim()}}),{variant:t,autoHideDuration:1e3*r})},f=[];var h,y=function(e,t){return e=setTimeout(()=>{t()},1e3*e),f.push(e),function(e){clearTimeout(e);e=f.indexOf(e);-1<e&&f.splice(e,1)}.bind(null,e)},m="1.1.4",N=7.5,j=60,z=300,p=e=>{e=e.match(/(\d+)\.(\d+)\.(\d+)(?:\.(\d+))?/);if(null!==e)return{Text:e[0],Major:parseInt(e[1]),Minor:parseInt(e[2]),Patch:parseInt(e[3]),Control:e[4]?parseInt(e[4]):void 0}},_=(e,t)=>{t={Text:"",Major:t.Major-e.Major,Minor:t.Minor-e.Minor,Patch:t.Patch-e.Patch,Control:void 0===t.Control&&void 0===e.Control?0:void 0===t.Control||void 0===e.Control?e.Control:t.Control-e.Control};return[t,0!==t.Major||0!==t.Minor||0!==t.Patch||0!==t.Control]},F=p(m),v=!1,W=e=>{a.Clean(),document.querySelector("#simpleDbeautifulDlyrics")?.remove(),r.remove();var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.innerHTML=e,document.body.appendChild(t),v=!0},b=async()=>{let i=j;fetch("https://api.github.com/repos/kamiloo13/spicetify-extensions/contents/extensions/simple-beautiful-lyrics/dist/simple-beautiful-lyrics.js").then(e=>e.json()).then(e=>fetch("https://api.github.com/repos/kamiloo13/spicetify-extensions/git/blobs/"+e.sha)).then(e=>e.json()).then(e=>atob(e.content)).then(e=>{var t,r,a=p(e);if(void 0!==a)return[t,r]=_(F,a),r&&(0<t.Major||0<=t.Minor||0<=t.Patch)?(H(`<h3>Simple Beautiful Lyrics Updated!</h3><h4 style = 'margin-top: 4px; margin-bottom: 4px; font-weight: normal;'>No need to re-install - it's already running!</h4><span style = 'opacity: 0.75;'>Version ${m} -> ${a.Text}</span>`,0<t.Major?"success":t.Major<0||t.Minor<0||t.Patch<0?"warning":"info",N),W(e)):void(i=z);console.warn("[simple-beautiful-lyrics] AutoUpdater: Unable to Parse Cached Version")}).catch(e=>console.warn("Error: "+e)).finally(()=>{v||a.AddTask(y(i,b),"CheckForUpdate")})},g=class{constructor(){this.listeners=[]}Connect(e){return this.listeners.push(e),()=>this.Disconnect(e)}Disconnect(e){e=this.listeners.indexOf(e);-1<e&&this.listeners.splice(e,1)}Fire(){this.listeners.forEach(e=>e())}},C=new class{constructor(){this.SongChanged=new g,this.Started=!1}Start(){if(!0!==this.Started){this.Started=!0;let e=()=>{this.SongChanged.Fire()};s.addEventListener("songchange",e),a.AddTask(()=>s.removeEventListener("songchange",e)),void 0!==s.data&&e()}}},S=new g,w=1.25,q=40,k=new Map,L=(k.set("Default","brightness(0.5) saturate(2.5)"),k.set("SidePanel","brightness(1) saturate(2.25)"),new Map),M=e=>e.Default,Y=async(e,c,d)=>{let n=M(e);return new Promise((e,t)=>{let r=new Image;r.onload=()=>e(r),r.onerror=t,r.src=n}).then(e=>{var t,r=[];for(t of d){var a=t,i=t,n=new OffscreenCanvas(a,i),s=n.getContext("2d"),o=n.width/2,l=n.height/2,l=(s.beginPath(),s.arc(o,l,o,0,2*Math.PI),s.clip(),s.drawImage(e,0,0,a,i),new OffscreenCanvas(Math.round(a*w),Math.round(i*w))),o=l.getContext("2d"),s=l.width/2,a=l.height/2,i=k.get(c)??k.get("Default");o.filter=i+` blur(${q}px)`,o.drawImage(n,s-n.width/2,a-n.height/2),r.push(l.convertToBlob({type:"image/webp",quality:1}))}return Promise.all(r)}).then(t=>{let e=L.get(n);void 0===e&&(e=new Map,L.set(n,e));var r=e.get(c);if(void 0!==r)for(var a of r.values())URL.revokeObjectURL(a);var i=new Map;for(let e=0;e<t.length;e++)i.set(d[e],URL.createObjectURL(t[e]));return i})},G=(e,t,r)=>{e=M(e),e=L.get(e);if(void 0!==e){var a=e.get(t);if(void 0!==a){for(var i of r)if(!1===a.has(i))return;return a}}},x=()=>{var e=s.data.item.metadata,e={Large:e.image_xlarge_url,Big:e.image_large_url,Default:e.image_url,Small:e.image_small_url};e.Default!==h?.Default&&(h=e,S.Fire())},A=()=>h,O=class{static findSetIndex(e){var t=O.ComponentClasses[e];for(let e=0;e<t.length;e++)if(document.body.querySelector("."+t[e]))return void(O.SetIndex=e)}static getComponent(e){return-1===O.SetIndex&&O.findSetIndex(e),document.body.querySelector("."+O.ComponentClasses[e][O.SetIndex])}static checkClassNamesMatch(e,t){-1===O.SetIndex&&O.findSetIndex(t);t=O.ComponentClasses[t][O.SetIndex];return e.contains(t)}},T=O,E=(T.ComponentClasses={FullScreenLyricsBackgroundClass:["lyrics-lyrics-background","o4GE4jG5_QICak2JK_bn","L9xhJOJnV2OL5Chm3Jew"],FullScreenLyricsContainerClass:["lyrics-lyrics-contentWrapper","_Wna90no0o0dta47Heiw","esRByMgBY3TiENAsbDHA"],LyricClass:["lyrics-lyricsContent-lyric","nw6rbs8R08fpPn7RWW2w","NiCdLCpp3o2z6nBrayOn"],UnsyncedLyricClass:["lyrics-lyricsContent-unsynced","SruqsAzX8rUtY2isUZDF","HxblHEsl2WX2yhubfVIc"],HighlightedLyricClass:["lyrics-lyricsContent-highlight","aeO5D7ulxy19q4qNBrkk","MEjuIn9iTBQbnCqHpkoQ"],ActiveLyricClass:["lyrics-lyricsContent-active","EhKgYshvOwpSrTv399Mw","arY01KDGhWNgzlAHlhpd"]},T.SetIndex=-1,T),K=!1,J=[2,3],V=["lyrics-background-color","lyrics-background-back","lyrics-background-back-center"],$=[0,0,1],Q=.25,P=a.AddSubCleanup(new e,"LiveBackgrounds"),X=e=>{let n=P.AddHtml(document.createElement("div")),s=(n.classList.add("lyrics-background-container"),[]);for(var t of V){var r=P.AddHtml(document.createElement("img"));r.classList.add(t),n.appendChild(r),s.push(r)}let o;if(K){let a=[],i=e=>{for(var[t,r]of s.entries())r.src=e?e.get(a[$[t]])??"MISSING":""},e=(o=()=>{let t=A();if(void 0===t)return i();for(var e of s)e.src=t.Default;var r=G(t,"LyricsPlusFullScreen",a);void 0===r?Y(t,"LyricsPlusFullScreen",a).then(e=>{t===A()&&i(e)}):i(r)},()=>{var e,t=n.offsetWidth,r=[];for(e of J)r.push(Math.floor(t*e));a=r,o()});P.AddObserver(new ResizeObserver(()=>P.AddTask(y(Q,e),"ContainerResize"))).observe(n),e()}else o=()=>{var e,t=A()?.Default??"";for(e of s)e.src=t};P.AddTask(S.Connect(o)),o();var a=()=>{e.classList.contains("lyrics-background")||e.classList.add("lyrics-background")};a(),P.AddObserver(new MutationObserver(a)).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),e.prepend(n),P.AddTask(()=>e.classList.remove("lyrics-background"))},D=null,I=()=>{var e=E.getComponent("FullScreenLyricsBackgroundClass");D!==e&&(null===e?(D=null,P.Clean()):((D=e).style.display="none",X(e?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.querySelector(".under-main-view"))))},Z=4,ee=.5,te=.25,re=.005,B=a.AddSubCleanup(new e,"Lyrics"),ae=i=>{let s=new Map,n=0,o=(e,t)=>{e.style.fontSize="Active"==t.State?n+ee+"rem":""},e=()=>{let t=0;for(var[e,r]of s){e=e.classList;E.checkClassNamesMatch(e,"ActiveLyricClass")?(r.State="Active",t=r.LayoutOrder):E.checkClassNamesMatch(e,"UnsyncedLyricClass")?r.State="Unsynced":E.checkClassNamesMatch(e,"HighlightedLyricClass")?r.State="Sung":r.State="Unsung"}for(var[a,i]of s){var n="Active"===i.State||"Unsynced"===i.State;let e;e=n||t<=1?0:Math.min(Math.abs(i.LayoutOrder-t),Z);n=n?"var(--lyrics-color-active)":"Sung"===i.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";o(a,i),a.style.color="transparent",a.style.textShadow=`0 0 ${e}px `+n}},t=()=>{var e,t,r=getComputedStyle(i),a=getComputedStyle(document.documentElement),r=parseFloat(r.fontSize),a=parseFloat(a.fontSize);n=r/a;for([e,t]of s)o(e,t)};var r,a,l;for(r of i.childNodes)r instanceof HTMLDivElement&&E.checkClassNamesMatch(r.classList,"LyricClass")&&(a=r,l=void 0,l=Array.from(i.children).indexOf(a),B.AddObserver(new MutationObserver(()=>B.AddTask(y(re,e),"LyricUpdate"))).observe(a,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),s.set(a,{LayoutOrder:l,State:"Unsung"}));B.AddObserver(new ResizeObserver(()=>B.AddTask(y(te,t),"ContainerResize"))).observe(document.body),t(),e()},R=null,ie=()=>{var e=E.getComponent("FullScreenLyricsContainerClass");R!==e&&(R=null,B.Clean(),e)&&ae(R=e)};var ne=async function(){for(;!t&&!U();)await new Promise(e=>setTimeout(e,100));i||(i?console.log("[simple-beautiful-lyrics] AutoUpdater: Development Mode - Skipping Update Check"):(console.log("[simple-beautiful-lyrics] AutoUpdater: Checking for Updates"),b()),a.AddTask(C.SongChanged.Connect(x)),x(),C.Start(),a.AddObserver(new MutationObserver(()=>{I(),ie()})).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),I(),a.AddTask(C.SongChanged.Connect(()=>R=null)),ie())};(async()=>{await ne()})()})();(async()=>{var e;document.getElementById("simpleDbeautifulDlyrics")||((e=document.createElement("style")).id="simpleDbeautifulDlyrics",e.textContent=String.raw`
  .lyrics-lyricsContent-lyric:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important}.lyrics-lyricsContent-lyric{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important}.nw6rbs8R08fpPn7RWW2w:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important}.nw6rbs8R08fpPn7RWW2w{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important}.NiCdLCpp3o2z6nBrayOn:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important}.NiCdLCpp3o2z6nBrayOn{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important}.lyrics-lyricsContent-active{margin-top:.25em;margin-bottom:.25em}.EhKgYshvOwpSrTv399Mw{margin-top:.25em;margin-bottom:.25em}.arY01KDGhWNgzlAHlhpd{margin-top:.25em;margin-bottom:.25em}.Root__main-view:has(.lyrics-background) .os-scrollbar,.os-host:has(.lyrics-background) .os-scrollbar{padding:5px}.Root__main-view:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle,.os-host:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle{mix-blend-mode:overlay;background-color:rgba(252,249,249,.117)!important}.lyrics-background{overflow:hidden;position:static}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-back-center,.lyrics-background-color{position:absolute;width:200%;animation:rotate 35s linear infinite;filter:blur(40px);border-radius:100em}.lyrics-background-color{right:0;top:0;z-index:10}.lyrics-background-back{left:0;bottom:0;z-index:1;animation-direction:reverse}.lyrics-background-back-center{z-index:0;width:300%;right:-50%;top:-20%;animation-direction:reverse}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}:root{--beautiful-lyrics-random-degree:258deg}@keyframes rotate{0%{transform:rotate(var(--beautiful-lyrics-random-degree))}100%{transform:rotate(calc(var(--beautiful-lyrics-random-degree) + 360deg))}}@font-face{font-family:BeautifulLyrics;font-weight:400;src:url(https://fonts.socalifornian.live/LyricsRegular.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:500;src:url(https://fonts.socalifornian.live/LyricsMedium.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:600;src:url(https://fonts.socalifornian.live/LyricsSemibold.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:700;src:url(https://fonts.socalifornian.live/LyricsBold.woff2) format("woff2")}.lyrics-lyricsContent-text{font-family:BeautifulLyrics!important}
      `.trim(),document.head.appendChild(e))})()}();