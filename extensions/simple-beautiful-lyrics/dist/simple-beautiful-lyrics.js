(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var e=class{constructor(){this.tasks=[],this.subCleanups=[]}AddTask(e,t){t&&this.Clean(t),this.tasks.push({id:t,task:e})}AddSubCleanup(e,t){return this.subCleanups.push({instance:e,id:t}),e}AddObserver(e,t){return this.AddTask(e.disconnect.bind(e),t),e}AddHtml(e,t){return this.AddTask(()=>{e.remove()},t),e}Clean(t){t?(this.tasks=this.tasks.filter(e=>e.id!==t||(e.task(),!1)),this.subCleanups=this.subCleanups.filter(e=>e.id!==t||(e.instance.Clean(),!1))):(this.tasks.forEach(e=>{e.task()}),this.subCleanups.forEach(e=>{e.instance.Clean()}),this.tasks=[])}},t=new e,r=!1;{let e,t;for(var n of document.getElementsByTagName("script"))n.src.includes("simple-beautiful-lyrics.js")&&(n.src.startsWith("https://xpui.app.spotify.com/")?void 0===t?t=n:n.remove():void 0===e?e=n:n.remove());void 0===t?e:(r=!0,void 0!==e&&e.remove(),t)}var a,i=!1,s=Spicetify.Player,o=Spicetify.showNotification,c=Spicetify.Platform,l=c?.History,d=Spicetify.Playbar,u=Spicetify.Snackbar,m=()=>{s=Spicetify.Player,o=Spicetify.showNotification,l=(c=Spicetify.Platform)?.History,d=Spicetify.Playbar,u=Spicetify.Snackbar,void 0!==s&&void 0!==o&&void 0!==c&&void 0!==l&&void 0!==d&&void 0!==u&&(i=!0)},f=class{constructor(){this.listeners=[]}Connect(e){return this.listeners.push(e),()=>this.Disconnect(e)}Disconnect(e){e=this.listeners.indexOf(e);-1<e&&this.listeners.splice(e,1)}Fire(){this.listeners.forEach(e=>e())}},y=new class{constructor(){this.SongChanged=new f,this.Started=!1}Start(){if(!0!==this.Started){this.Started=!0;let e=()=>{this.SongChanged.Fire()};s.addEventListener("songchange",e),t.AddTask(()=>s.removeEventListener("songchange",e)),void 0!==s.data&&e()}}},g=new f,p=new Map,h=(p.set("Default","brightness(0.5) saturate(2.5)"),p.set("SidePanel","brightness(1) saturate(2.25)"),15),b=0,v=()=>{var e;!s.data&&b<h?(setTimeout(v,100),b++):(b=0,(e=s.data?.item?.metadata)?(e={Large:e.image_xlarge_url,Big:e.image_large_url,Default:e.image_url,Small:e.image_small_url}).Default!==a?.Default&&(a=e,g.Fire()):console.warn("No metadata available for the current track.",s.data))},_=()=>a,C=class{static findSetIndex(e,r=document.body){var n=C.ComponentClasses[e];if(n?.length)if(1===n.length)C.SetIndexMap[e]=0;else{let t=r.querySelector(C.ComponentSelectors[e]);if(t){r=n.findIndex(e=>t.classList.contains(e));if(-1!==r)return C.SetIndexMap[e]=r,void(C.ElementCache[e]=t)}n=(C.SetIndexMapTries[e]??0)+1;C.SetIndexMapTries[e]=n,C.MaxTries<=n&&(console.warn(`[SBL]: Failed to find class for ${e} after ${C.MaxTries} tries. Assuming default class.`),C.SetIndexMap[e]=0)}}static getComponent(e,t=document.body){var r=C.ElementCache[e];return r&&t.contains(r)?r:void 0===C.SetIndexMap[e]&&(C.findSetIndex(e,t),void 0===C.SetIndexMap[e])?null:(r=t.querySelector("."+C.ComponentClasses[e][C.SetIndexMap[e]]),C.ElementCache[e]=r)}static getComponents(e,t=document.body){return void 0===C.SetIndexMap[e]&&(C.findSetIndex(e,t),void 0===C.SetIndexMap[e])?document.createDocumentFragment().childNodes:t.querySelectorAll("."+C.ComponentClasses[e][C.SetIndexMap[e]])}static checkClassNamesMatch(t,e){return C.ComponentClasses[e].some(e=>t.contains(e))}},k=((p=C).ComponentClasses={FullScreenLyricsBackgroundClass:["lyrics-lyrics-background","RFThkjLuWfPUO9shrMOZ"],FullScreenLyricsContainerClass:["lyrics-lyrics-contentWrapper","t_dtt9KL1wnNRvRO_y5L"],MainLyricsContainerClass:["lyrics-lyrics-container","lofIAg8Ixko3mfBrbfej"],CinemaModeBackgroundToRemove:["x81eiLoZ5zWkSS1y28Oj"],CinemaModeContainerToInjectBackground:["x0lJCeJrx_56dJTWdATl"],LyricClass:["lyrics-lyricsContent-lyric","o69qODXrbOkf6Tv7fa51"],UnsyncedLyricClass:["lyrics-lyricsContent-unsynced","eTLjCqbDo7QehPEPz86a"],HighlightedLyricClass:["lyrics-lyricsContent-highlight","Plu0zvuRv7kOQwsQ02cC"],ActiveLyricClass:["lyrics-lyricsContent-active","_gZrl2ExJwyxPy1pEUG2"]},p.ComponentSelectors=Object.fromEntries(Object.entries(C.ComponentClasses).map(([e,t])=>[e,t.map(e=>"."+e).join(", ")])),p.SetIndexMap={},p.ElementCache={},p.SetIndexMapTries={},p.MaxTries=1e3,p),S=[],P=function(e,t){return e=setTimeout(()=>{t()},1e3*e),S.push(e),function(e){clearTimeout(e);e=S.indexOf(e);-1<e&&S.splice(e,1)}.bind(null,e)},R=4,F=.5,j=.25,L=t.AddSubCleanup(new e,"Lyrics"),x=new Array,w=0,M=(e,t,r)=>{e.Lyric.style.cssText=`color: transparent; text-shadow: ${void 0===r||void 0===t?e.Lyric.style.textShadow:`0 0 ${r}px `+t}; font-size: ${"Active"===e.State?w+F+"rem":""};`},T=()=>{let r=0;for(let e=0;e<x.length;e++){var t=x[e],n=t.Lyric.classList;k.checkClassNamesMatch(n,"ActiveLyricClass")?(t.State="Active",r=e):k.checkClassNamesMatch(n,"UnsyncedLyricClass")?t.State="Unsynced":k.checkClassNamesMatch(n,"HighlightedLyricClass")?t.State="Sung":t.State="Unsung"}for(let t=0;t<x.length;t++){var a=x[t],i="Active"===a.State||"Unsynced"===a.State;let e;e=i||r<=1?0:Math.min(Math.abs(t-r),R);i=i?"var(--lyrics-color-active)":"Sung"===a.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";M(a,i,e)}},H=e=>{if(e.previousSibling){var t=e.previousSibling;for(let e=0;e<x.length;e++)if(x[e].Lyric===t)return e+1}if(e.nextSibling){var r=e.nextSibling;for(let e=0;e<x.length;e++)if(x[e].Lyric===r)return e}return 0},U=e=>{var t=H(e);if(0<e.removedNodes.length&&x.splice(t,e.removedNodes.length),0<e.addedNodes.length){var r,n=[];for(r of e.addedNodes)r instanceof HTMLDivElement&&k.checkClassNamesMatch(r.classList,"LyricClass")&&n.push({Lyric:r,State:"Unsung"});0<n.length&&x.splice(t,0,...n)}},A=e=>{x.length=0;for(var t of e.children)t instanceof HTMLDivElement&&k.checkClassNamesMatch(t.classList,"LyricClass")&&x.push({Lyric:t,State:"Unsung"})},q=n=>{let a=0,e=()=>{var e=getComputedStyle(n),t=getComputedStyle(document.documentElement),e=parseFloat(e.fontSize)/parseFloat(t.fontSize);if(e!==a){w=a=e;for(var r of x)M(r)}},i=(A(n),0);L.AddObserver(new MutationObserver(e=>{let t=!1;if(5<i)A(n),T(),i=0;else{for(var r of e)"childList"===r.type&&(U(r),t=!0);t&&(T(),i++)}})).observe(n,{attributes:!1,childList:!0,subtree:!1}),L.AddObserver(new ResizeObserver(()=>L.AddTask(P(j,e),"ContainerResize"))).observe(document.body),e(),T()},E=null,O=e=>{e=e?k.getComponent("FullScreenLyricsContainerClass",e):null;let t=e;e&&1===e.childNodes.length&&e.childNodes[0]instanceof HTMLDivElement&&(t=e.childNodes[0]),E!==t&&(E=null,L.Clean(),t)&&(E=t,q(t))},W=["lyrics-background-color","lyrics-background-back","lyrics-background-back-center"],I=t.AddSubCleanup(new e,"LiveMainBackgrounds"),z=e=>{var t,r=I.AddHtml(document.createElement("div"));r.classList.add("lyrics-background-container");let n=[];for(t of W){var a=I.AddHtml(document.createElement("img"));a.classList.add(t),r.appendChild(a),n.push(a)}var i=()=>{var e,t=_()?.Default??"";for(e of n)e.src=t},i=(I.AddTask(g.Connect(i)),i(),()=>{e.classList.contains("lyrics-background")||e.classList.add("lyrics-background")});i(),I.AddObserver(new MutationObserver(i)).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),e.prepend(r),I.AddTask(()=>e.classList.remove("lyrics-background"))},D=null,N=null,B=e=>{var t=e?k.getComponent("FullScreenLyricsBackgroundClass",e):null;D!==t&&(null===t?(D=null,I.Clean()):(D=t,t=e?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.querySelector(".before-scroll-node"),N&&N!==e&&I.Clean(),N=e,t?z(t):(e=k.getComponent("CinemaModeContainerToInjectBackground",document.body))&&(t=I.AddHtml(document.createElement("div")),e.prepend(t),z(t))))},Z=async function(){if(!r){for(;!i&&!m();)await new Promise(e=>setTimeout(e,100));t.AddTask(y.SongChanged.Connect(v)),v(),y.Start();t.AddObserver(new MutationObserver(()=>{var e=k.getComponents("MainLyricsContainerClass",document.body),e=1==e.length?e[0]:1<e.length?e[1]:null;B(e),O(e)})).observe(document.body,{attributes:!1,childList:!0,subtree:!0});var e=k.getComponents("MainLyricsContainerClass",document.body),e=1==e.length?e[0]:1<e.length?e[1]:null;B(e),e=e,t.AddTask(y.SongChanged.Connect(()=>E=null)),O(e)}};(async()=>{await Z()})(),(async()=>{var e;document.getElementById("simpleDbeautifulDlyrics")||((e=document.createElement("style")).id="simpleDbeautifulDlyrics",e.textContent=String.raw`
  @font-face{font-family:BeautifulLyrics;font-weight:400;src:url(https://fonts.socalifornian.live/LyricsRegular.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:500;src:url(https://fonts.socalifornian.live/LyricsMedium.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:600;src:url(https://fonts.socalifornian.live/LyricsSemibold.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:700;src:url(https://fonts.socalifornian.live/LyricsBold.woff2) format("woff2")}.MmIREVIj8A2aFVvBZ2Ev,.lyrics-lyricsContent-text{font-family:BeautifulLyrics,var(--encore-body-font-stack, var(--fallback-fonts, sans-serif)),sans-serif!important}.lyrics-lyrics-contentWrapper,.t_dtt9KL1wnNRvRO_y5L{--encore-text-size-larger-4:3.2rem;--encore-text-size-larger-3:2.4rem;--encore-text-size-larger-2:1.2rem;--encore-text-size-larger:1rem;width:min(100% - 128px,1024px + 10%)!important}:root{--sbl-lyrics-background-gradient:linear-gradient(90deg, rgba(10, 10, 10, 0.54), rgba(0, 0, 0, 0))}.lyrics-lyricsContent-lyric:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important;text-decoration:none!important}.lyrics-lyricsContent-lyric{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important;font-weight:700;margin-bottom:.5em!important;cursor:pointer;transition:font-size 50ms ease-out,margin 50ms ease-out}.o69qODXrbOkf6Tv7fa51:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important;text-decoration:none!important}.o69qODXrbOkf6Tv7fa51{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important;font-weight:700;margin-bottom:.5em!important;cursor:pointer;transition:font-size 50ms ease-out,margin 50ms ease-out}.lyrics-lyricsContent-active{margin-top:-.25em!important;margin-bottom:.25em!important}._gZrl2ExJwyxPy1pEUG2{margin-top:-.25em!important;margin-bottom:.25em!important}.lyrics-lyrics-background{background-color:transparent!important;background-image:var(--sbl-lyrics-background-gradient)!important;background-size:cover;background-repeat:no-repeat}.RFThkjLuWfPUO9shrMOZ{background-color:transparent!important;background-image:var(--sbl-lyrics-background-gradient)!important;background-size:cover;background-repeat:no-repeat}.x81eiLoZ5zWkSS1y28Oj{animation:background-fadeout 2s ease-in-out forwards}.Root__main-view:has(.lyrics-background) .os-scrollbar,.os-host:has(.lyrics-background) .os-scrollbar{padding:5px}.Root__main-view:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle,.os-host:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle{mix-blend-mode:overlay;background-color:rgba(252,249,249,.117)!important}.lyrics-background{overflow:hidden;position:static}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-back-center,.lyrics-background-color{position:absolute;width:200%;animation:rotate 35s linear infinite;filter:blur(40px);border-radius:100em}.lyrics-background-color{right:0;top:0;z-index:10}.lyrics-background-back{left:0;bottom:0;z-index:1;animation-direction:reverse}.lyrics-background-back-center{z-index:0;width:300%;right:-50%;top:-20%;animation-direction:reverse}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes background-fadeout{0%{opacity:1}100%{opacity:0}}
      `.trim(),document.head.appendChild(e))})()})();