(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var e=class{constructor(){this.tasks=[],this.subCleanups=[]}AddTask(e,t){t&&this.Clean(t),this.tasks.push({id:t,task:e})}AddSubCleanup(e,t){return this.subCleanups.push({instance:e,id:t}),e}AddObserver(e,t){return this.AddTask(e.disconnect.bind(e),t),e}AddHtml(e,t){return this.AddTask(()=>{e.remove()},t),e}Clean(t){t?(this.tasks=this.tasks.filter(e=>e.id!==t||(e.task(),!1)),this.subCleanups=this.subCleanups.filter(e=>e.id!==t||(e.instance.Clean(),!1))):(this.tasks.forEach(e=>{e.task()}),this.subCleanups.forEach(e=>{e.instance.Clean()}),this.tasks=[])}},t=new e,r=!1;{let e,t;for(var a of document.getElementsByTagName("script"))a.src.includes("simple-beautiful-lyrics.js")&&(a.src.startsWith("https://xpui.app.spotify.com/")?void 0===t?t=a:a.remove():void 0===e?e=a:a.remove());void 0===t?e:(r=!0,void 0!==e&&e.remove(),t)}var i,n=!1,o=Spicetify.Player,s=Spicetify.showNotification,c=Spicetify.Platform,l=c?.History,d=Spicetify.Playbar,u=Spicetify.Snackbar,m=()=>{o=Spicetify.Player,s=Spicetify.showNotification,l=(c=Spicetify.Platform)?.History,d=Spicetify.Playbar,u=Spicetify.Snackbar,void 0!==o&&void 0!==s&&void 0!==c&&void 0!==l&&void 0!==d&&void 0!==u&&(n=!0)},f=class{constructor(){this.listeners=[]}Connect(e){return this.listeners.push(e),()=>this.Disconnect(e)}Disconnect(e){e=this.listeners.indexOf(e);-1<e&&this.listeners.splice(e,1)}Fire(){this.listeners.forEach(e=>e())}},y=new class{constructor(){this.SongChanged=new f,this.Started=!1}Start(){if(!0!==this.Started){this.Started=!0;let e=()=>{this.SongChanged.Fire()};o.addEventListener("songchange",e),t.AddTask(()=>o.removeEventListener("songchange",e)),void 0!==o.data&&e()}}},p=new f,g=new Map,b=(g.set("Default","brightness(0.5) saturate(2.5)"),g.set("SidePanel","brightness(1) saturate(2.25)"),15),h=0,v=()=>{var e;!o.data&&h<b?(setTimeout(v,100),h++):(h=0,(e=o.data?.item?.metadata)?(e={Large:e.image_xlarge_url,Big:e.image_large_url,Default:e.image_url,Small:e.image_small_url}).Default!==i?.Default&&(i=e,p.Fire()):console.warn("No metadata available for the current track.",o.data))},S=()=>i,C=class{static findSetIndex(e,r=document.body){var a=C.ComponentClasses[e];if(a?.length)if(1===a.length)C.SetIndexMap[e]=0;else{let t=r.querySelector(C.ComponentSelectors[e]);if(t){r=a.findIndex(e=>t.classList.contains(e));if(-1!==r)return C.SetIndexMap[e]=r,void(C.ElementCache[e]=t)}a=(C.SetIndexMapTries[e]??0)+1;C.SetIndexMapTries[e]=a,C.MaxTries<=a&&(console.warn(`[SBL]: Failed to find class for ${e} after ${C.MaxTries} tries. Assuming default class.`),C.SetIndexMap[e]=0)}}static getComponent(e,t=document.body){var r=C.ElementCache[e];return r&&t.contains(r)?r:void 0===C.SetIndexMap[e]&&(C.findSetIndex(e,t),void 0===C.SetIndexMap[e])?null:(r=t.querySelector("."+C.ComponentClasses[e][C.SetIndexMap[e]]),C.ElementCache[e]=r)}static getComponents(e,t=document.body){return void 0===C.SetIndexMap[e]&&(C.findSetIndex(e,t),void 0===C.SetIndexMap[e])?document.createDocumentFragment().childNodes:t.querySelectorAll("."+C.ComponentClasses[e][C.SetIndexMap[e]])}static checkClassNamesMatch(t,e){return C.ComponentClasses[e].some(e=>t.contains(e))}},k=((g=C).ComponentClasses={FullScreenLyricsBackgroundClass:["lyrics-lyrics-background","RFThkjLuWfPUO9shrMOZ"],FullScreenLyricsContainerClass:["lyrics-lyrics-contentWrapper","t_dtt9KL1wnNRvRO_y5L"],MainLyricsContainerClass:["lyrics-lyrics-container","lofIAg8Ixko3mfBrbfej"],CinemaModeBackgroundToRemove:["x81eiLoZ5zWkSS1y28Oj"],CinemaModeContainerToInjectBackground:["x0lJCeJrx_56dJTWdATl"],LyricClass:["lyrics-lyricsContent-lyric","o69qODXrbOkf6Tv7fa51"],UnsyncedLyricClass:["lyrics-lyricsContent-unsynced","eTLjCqbDo7QehPEPz86a"],HighlightedLyricClass:["lyrics-lyricsContent-highlight","ve52ddYhoAd3Xf27Zxfm"],ActiveLyricClass:["lyrics-lyricsContent-active","_gZrl2ExJwyxPy1pEUG2"]},g.ComponentSelectors=Object.fromEntries(Object.entries(C.ComponentClasses).map(([e,t])=>[e,t.map(e=>"."+e).join(", ")])),g.SetIndexMap={},g.ElementCache={},g.SetIndexMapTries={},g.MaxTries=1e3,g),L=[],w=function(e,t){return e=setTimeout(()=>{t()},1e3*e),L.push(e),function(e){clearTimeout(e);e=L.indexOf(e);-1<e&&L.splice(e,1)}.bind(null,e)},x=4,M=.5,T=.25,R=.005,A=t.AddSubCleanup(new e,"Lyrics"),N=i=>{let o=new Map,n=0,s=(e,t)=>{e.style.fontSize="Active"==t.State?n+M+"rem":""},e=()=>{let t=0;for(var[e,r]of o){e=e.classList;k.checkClassNamesMatch(e,"ActiveLyricClass")?(r.State="Active",t=r.LayoutOrder):k.checkClassNamesMatch(e,"UnsyncedLyricClass")?r.State="Unsynced":k.checkClassNamesMatch(e,"HighlightedLyricClass")?r.State="Sung":r.State="Unsung"}for(var[a,i]of o){var n="Active"===i.State||"Unsynced"===i.State;let e;e=n||t<=1?0:Math.min(Math.abs(i.LayoutOrder-t),x);n=n?"var(--lyrics-color-active)":"Sung"===i.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";s(a,i),a.style.color="transparent",a.style.textShadow=`0 0 ${e}px `+n}},t=()=>{var e,t,r=getComputedStyle(i),a=getComputedStyle(document.documentElement),r=parseFloat(r.fontSize),a=parseFloat(a.fontSize);n=r/a;for([e,t]of o)s(e,t)};var r,a,c;for(r of i.childNodes)r instanceof HTMLDivElement&&k.checkClassNamesMatch(r.classList,"LyricClass")&&(a=r,c=void 0,c=Array.from(i.children).indexOf(a),A.AddObserver(new MutationObserver(()=>A.AddTask(w(R,e),"LyricUpdate"))).observe(a,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),o.set(a,{LayoutOrder:c,State:"Unsung"}));A.AddObserver(new ResizeObserver(()=>A.AddTask(w(T,t),"ContainerResize"))).observe(document.body),t(),e()},O=null,E=e=>{e=e?k.getComponent("FullScreenLyricsContainerClass",e):null;O!==e&&(O=null,A.Clean(),e)&&N(O=e)},P=["lyrics-background-color","lyrics-background-back","lyrics-background-back-center"],I=t.AddSubCleanup(new e,"LiveMainBackgrounds"),B=e=>{var t,r=I.AddHtml(document.createElement("div"));r.classList.add("lyrics-background-container");let a=[];for(t of P){var i=I.AddHtml(document.createElement("img"));i.classList.add(t),r.appendChild(i),a.push(i)}var n=()=>{var e,t=S()?.Default??"";for(e of a)e.src=t},n=(I.AddTask(p.Connect(n)),n(),()=>{e.classList.contains("lyrics-background")||e.classList.add("lyrics-background")});n(),I.AddObserver(new MutationObserver(n)).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),e.prepend(r),I.AddTask(()=>e.classList.remove("lyrics-background"))},D=null,F=null,_=e=>{var t=e?k.getComponent("FullScreenLyricsBackgroundClass",e):null;D!==t&&(null===t?(D=null,I.Clean()):(D=t,t=e?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.querySelector(".before-scroll-node"),F&&F!==e&&I.Clean(),F=e,t?B(t):(e=k.getComponent("CinemaModeContainerToInjectBackground",document.body))&&((t=k.getComponent("CinemaModeBackgroundToRemove",e))&&(t.style.background="none"),t=I.AddHtml(document.createElement("div")),e.prepend(t),B(t))))},z=async function(){if(!r){for(;!n&&!m();)await new Promise(e=>setTimeout(e,100));Spicetify.LocalStorage.remove("simple-beautiful-lyrics:cache-lyrics"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.api-endpoint"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.api-input-endpoint"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.api-token"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.api-token-input"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.cache-version"),Spicetify.LocalStorage.remove("simple-beautiful-lyrics.enable-debug"),1!=JSON.parse(Spicetify.LocalStorage.get("simple-beautiful-lyrics.override-fetch")||"{}")?.value||Spicetify.LocalStorage.get("more-lyrics.cache-version")||(Spicetify.showNotification('Simple Beautiful Lyrics: Feature adding more lyrics providers to Spotify page has been moved to "More Lyrics" extension.\nIf you still want to use this feature, please install the new extension from the marketplace.',!1,1e4),console.warn('Simple Beautiful Lyrics: Feature adding more lyrics providers to Spotify page has been moved to "More Lyrics" extension. If you still want to use this feature, please install the new extension from the marketplace.'),console.warn("Simple Beautiful Lyrics: If you want to disable this message, please do: `Spicetify.LocalStorage.remove('simple-beautiful-lyrics.override-fetch')`")),t.AddTask(y.SongChanged.Connect(v)),v(),y.Start();t.AddObserver(new MutationObserver(()=>{var e=k.getComponents("MainLyricsContainerClass",document.body),e=1==e.length?e[0]:1<e.length?e[1]:null;_(e),E(e)})).observe(document.body,{attributes:!1,childList:!0,subtree:!0});var e=k.getComponents("MainLyricsContainerClass",document.body),e=1==e.length?e[0]:1<e.length?e[1]:null;_(e),e=e,t.AddTask(y.SongChanged.Connect(()=>O=null)),E(e)}};(async()=>{await z()})(),(async()=>{var e;document.getElementById("simpleDbeautifulDlyrics")||((e=document.createElement("style")).id="simpleDbeautifulDlyrics",e.textContent=String.raw`
  @font-face{font-family:BeautifulLyrics;font-weight:400;src:url(https://fonts.socalifornian.live/LyricsRegular.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:500;src:url(https://fonts.socalifornian.live/LyricsMedium.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:600;src:url(https://fonts.socalifornian.live/LyricsSemibold.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:700;src:url(https://fonts.socalifornian.live/LyricsBold.woff2) format("woff2")}.MmIREVIj8A2aFVvBZ2Ev,.lyrics-lyricsContent-text{font-family:BeautifulLyrics,var(--encore-body-font-stack, var(--fallback-fonts, sans-serif)),sans-serif!important}.lyrics-lyrics-contentWrapper,.t_dtt9KL1wnNRvRO_y5L{--encore-text-size-larger-3:2.4rem;width:min(100% - 128px,1024px + 10%)!important}:root{--sbl-lyrics-background-gradient:linear-gradient(90deg, rgba(10, 10, 10, 0.54), rgba(0, 0, 0, 0))}.lyrics-lyricsContent-lyric:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important;text-decoration:none!important}.lyrics-lyricsContent-lyric{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important;font-weight:700;margin-bottom:.5em!important}.o69qODXrbOkf6Tv7fa51:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important;text-decoration:none!important}.o69qODXrbOkf6Tv7fa51{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important;font-weight:700;margin-bottom:.5em!important}.lyrics-lyricsContent-active{margin-top:-.25em!important;margin-bottom:.25em!important}._gZrl2ExJwyxPy1pEUG2{margin-top:-.25em!important;margin-bottom:.25em!important}.lyrics-lyrics-background{background-color:transparent!important;background-image:var(--sbl-lyrics-background-gradient)!important;background-size:cover;background-repeat:no-repeat}.RFThkjLuWfPUO9shrMOZ{background-color:transparent!important;background-image:var(--sbl-lyrics-background-gradient)!important;background-size:cover;background-repeat:no-repeat}.Root__main-view:has(.lyrics-background) .os-scrollbar,.os-host:has(.lyrics-background) .os-scrollbar{padding:5px}.Root__main-view:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle,.os-host:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle{mix-blend-mode:overlay;background-color:rgba(252,249,249,.117)!important}.lyrics-background{overflow:hidden;position:static}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-back-center,.lyrics-background-color{position:absolute;width:200%;animation:rotate 35s linear infinite;filter:blur(40px);border-radius:100em}.lyrics-background-color{right:0;top:0;z-index:10}.lyrics-background-back{left:0;bottom:0;z-index:1;animation-direction:reverse}.lyrics-background-back-center{z-index:0;width:300%;right:-50%;top:-20%;animation-direction:reverse}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
      `.trim(),document.head.appendChild(e))})()})();