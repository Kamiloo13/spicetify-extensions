!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));(()=>{var s,e=class{constructor(){this.tasks=[],this.subCleanups=[]}AddTask(e,t){t&&this.Clean(t),this.tasks.push({id:t,task:e})}AddSubCleanup(e,t){return this.subCleanups.push({instance:e,id:t}),e}AddObserver(e,t){return this.AddTask(e.disconnect.bind(e),t),e}AddHtml(e,t){return this.AddTask(()=>{e.remove()},t),e}Clean(t){t?(this.tasks=this.tasks.filter(e=>e.id!==t||(e.task(),!1)),this.subCleanups=this.subCleanups.filter(e=>e.id!==t||(e.instance.Clean(),!1))):(this.tasks.forEach(e=>{e.task()}),this.subCleanups.forEach(e=>{e.instance.Clean()}),this.tasks=[])}},n=new e,r=!1;{let e,t;for(const j of document.getElementsByTagName("script"))j.src.includes("simple-beautiful-lyrics.js")&&(j.src.startsWith("https://xpui.app.spotify.com/")?void 0===t?t=j:j.remove():void 0===e?e=j:j.remove());s=void 0===t?e:(r=!0,void 0!==e&&e.remove(),t)}var t,a,i,o,l=!1,c=Spicetify.Player,d=(Spicetify.showNotification,Spicetify.Platform?.History,Spicetify.Playbar,Spicetify.Snackbar),u=()=>{c=Spicetify.Player,t=Spicetify.showNotification,a=Spicetify.Platform,i=a?.History,o=Spicetify.Playbar,d=Spicetify.Snackbar,void 0!==c&&void 0!==t&&void 0!==a&&void 0!==i&&void 0!==o&&void 0!==d&&(l=!0)},f=[];var y,m=function(e,t){return e=setTimeout(()=>{t()},1e3*e),f.push(e),function(e){clearTimeout(e);e=f.indexOf(e);-1<e&&f.splice(e,1)}.bind(null,e)},h=e=>{e=e.match(/(\d+)\.(\d+)\.(\d+)(?:\.(\d+))?/);if(null!==e)return{Text:e[0],Major:parseInt(e[1]),Minor:parseInt(e[2]),Patch:parseInt(e[3]),Control:e[4]?parseInt(e[4]):void 0}},p=h("1.1.2"),b=async()=>{let i=60;fetch("https://api.github.com/repos/kamiloo13/spicetify-extensions/contents/extensions/simple-beautiful-lyrics/dist/simple-beautiful-lyrics.js").then(e=>e.json()).then(e=>fetch("https://api.github.com/repos/kamiloo13/spicetify-extensions/git/blobs/"+e.sha)).then(e=>e.json()).then(e=>atob(e.content)).then(e=>{var t,r,a=h(e);void 0!==a&&([r,t]=((e,t)=>{t={Text:"",Major:t.Major-e.Major,Minor:t.Minor-e.Minor,Patch:t.Patch-e.Patch,Control:void 0===t.Control&&void 0===e.Control?0:void 0===t.Control||void 0===e.Control?e.Control:t.Control-e.Control};return[t,0!==t.Major||0!==t.Minor||0!==t.Patch||0!==t.Control]})(p,a),t&&(2<a.Major||2==a.Major&&4<=a.Minor)?(t=`<h3>Simple Beautiful Lyrics Updated!</h3><h4 style = 'margin-top: 4px; margin-bottom: 4px; font-weight: normal;'>No need to re-install - it's already running!</h4><span style = 'opacity: 0.75;'>Version ${p.Text} -> ${a.Text}</span>`,a=0<r.Major?"success":r.Major<0||r.Minor<0||r.Patch<0?"warning":"info",r=7.5,d.enqueueSnackbar(Spicetify.React.createElement("div",{dangerouslySetInnerHTML:{__html:t.trim()}}),{variant:a,autoHideDuration:1e3*r}),t=e,n.Clean(),document.querySelector("#simpleDbeautifulDlyrics")?.remove(),(a=document.createElement("script")).setAttribute("type","text/javascript"),a.innerHTML=t,document.body.appendChild(a),s.remove()):i=300)}).catch(e=>console.warn("Error: "+e)).finally(()=>n.AddTask(m(i,b),"CheckForUpdate"))},v=class{constructor(){this.listeners=[]}Connect(e){return this.listeners.push(e),()=>this.Disconnect(e)}Disconnect(e){e=this.listeners.indexOf(e);-1<e&&this.listeners.splice(e,1)}Fire(){this.listeners.forEach(e=>e())}},g=new class{constructor(){this.SongChanged=new v,this.Started=!1}Start(){if(!0!==this.Started){this.Started=!0;const e=()=>{this.SongChanged.Fire()};c.addEventListener("songchange",e),n.AddTask(()=>c.removeEventListener("songchange",e)),void 0!==c.data&&e()}}},S=new v,k=new Map,C=(k.set("Default","brightness(0.5) saturate(2.5)"),k.set("SidePanel","brightness(1) saturate(2.25)"),()=>{var e=c.data.item.metadata,e={Large:e.image_xlarge_url,Big:e.image_large_url,Default:e.image_url,Small:e.image_small_url};e.Default!==y?.Default&&(y=e,S.Fire())}),w=(e=>(e.FullScreenLyricsBackgroundClass="o4GE4jG5_QICak2JK_bn",e.FullScreenLyricsContainerClass="_Wna90no0o0dta47Heiw",e.LyricClass="nw6rbs8R08fpPn7RWW2w",e.UnsyncedLyricClass="SruqsAzX8rUtY2isUZDF",e.HighlightedLyricClass="aeO5D7ulxy19q4qNBrkk",e.ActiveLyricClass="EhKgYshvOwpSrTv399Mw",e))({}),L=["lyrics-background-color","lyrics-background-back","lyrics-background-back-center"],A=n.AddSubCleanup(new e,"LiveBackgrounds"),M=e=>{const t=A.AddHtml(document.createElement("div")),r=(t.classList.add("lyrics-background-container"),[]);for(const n of L){var a=A.AddHtml(document.createElement("img"));a.classList.add(n),t.appendChild(a),r.push(a)}let i;i=()=>{var e=y?.Default??"";for(const t of r)t.src=e},A.AddTask(S.Connect(i)),i();var s=()=>{e.classList.contains("lyrics-background")||e.classList.add("lyrics-background")};s(),A.AddObserver(new MutationObserver(s)).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),e.prepend(t),A.AddTask(()=>e.classList.remove("lyrics-background"))},x=null,T=()=>{var e=document.body.querySelector("."+w.FullScreenLyricsBackgroundClass);x!==e&&(null===e?(x=null,A.Clean()):((x=e).style.display="none",M(document.body.querySelector("."+w.FullScreenLyricsBackgroundClass)?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.querySelector(".under-main-view"))))},E=n.AddSubCleanup(new e,"Lyrics"),D=i=>{const n=new Map;let s=0;const o=(e,t)=>{e.style.fontSize="Active"==t.State?s+.5+"rem":""},e=()=>{let t=0;for(var[e,r]of n){e=e.classList;e.contains(w.ActiveLyricClass)?(r.State="Active",t=r.LayoutOrder):e.contains(w.UnsyncedLyricClass)?r.State="Unsynced":e.contains(w.HighlightedLyricClass)?r.State="Sung":r.State="Unsung"}for(var[a,i]of n){var s="Active"===i.State||"Unsynced"===i.State;let e;e=s||t<=1?0:Math.min(Math.abs(i.LayoutOrder-t),4);s=s?"var(--lyrics-color-active)":"Sung"===i.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";o(a,i),a.style.color="transparent",a.style.textShadow=`0 0 ${e}px `+s}},t=()=>{var e,t,r=getComputedStyle(i),a=getComputedStyle(document.documentElement),r=parseFloat(r.fontSize),a=parseFloat(a.fontSize);s=r/a;for([e,t]of n)o(e,t)};var r,a;for(const l of i.childNodes)l instanceof HTMLDivElement&&l.classList.contains(w.LyricClass)&&(r=l,a=void 0,a=Array.from(i.children).indexOf(r),E.AddObserver(new MutationObserver(()=>E.AddTask(m(.005,e),"LyricUpdate"))).observe(r,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),n.set(r,{LayoutOrder:a,State:"Unsung"}));E.AddObserver(new ResizeObserver(()=>E.AddTask(m(.25,t),"ContainerResize"))).observe(document.body),t(),e()},O=null,P=()=>{var e=document.body.querySelector("."+w.FullScreenLyricsContainerClass);O!==e&&(O=null,E.Clean(),e)&&D(O=e)};var _=async function(){for(;!l&&!u();)await new Promise(e=>setTimeout(e,100));r||(r?console.log("[simple-beautiful-lyrics] AutoUpdater: Development Mode - Skipping Update Check"):(console.log("[simple-beautiful-lyrics] AutoUpdater: Checking for Updates"),b()),n.AddTask(g.SongChanged.Connect(C)),C(),g.Start(),n.AddObserver(new MutationObserver(()=>{T(),P()})).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),T(),n.AddTask(g.SongChanged.Connect(()=>O=null)),P())};(async()=>{await _()})()})();(async()=>{var e;document.getElementById("simpleDbeautifulDlyrics")||((e=document.createElement("style")).id="simpleDbeautifulDlyrics",e.textContent=String.raw`
  .nw6rbs8R08fpPn7RWW2w:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important}.EhKgYshvOwpSrTv399Mw{margin-top:.25em;margin-bottom:.25em}.Root__main-view:has(.lyrics-background) .os-scrollbar,.os-host:has(.lyrics-background) .os-scrollbar{padding:5px}.Root__main-view:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle,.os-host:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle{mix-blend-mode:overlay;background-color:rgba(252,249,249,.117)!important}.nw6rbs8R08fpPn7RWW2w{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important}.lyrics-background{overflow:hidden;position:static}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-back-center,.lyrics-background-color{position:absolute;width:200%;animation:rotate 35s linear infinite;filter:blur(40px);border-radius:100em}.lyrics-background-color{right:0;top:0;z-index:10}.lyrics-background-back{left:0;bottom:0;z-index:1;animation-direction:reverse}.lyrics-background-back-center{z-index:0;width:300%;right:-50%;top:-20%;animation-direction:reverse}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}:root{--beautiful-lyrics-random-degree:258deg}@keyframes rotate{0%{transform:rotate(var(--beautiful-lyrics-random-degree))}100%{transform:rotate(calc(var(--beautiful-lyrics-random-degree) + 360deg))}}@font-face{font-family:BeautifulLyrics;font-weight:400;src:url(https://fonts.socalifornian.live/LyricsRegular.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:500;src:url(https://fonts.socalifornian.live/LyricsMedium.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:600;src:url(https://fonts.socalifornian.live/LyricsSemibold.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:700;src:url(https://fonts.socalifornian.live/LyricsBold.woff2) format("woff2")}.lyrics-lyricsContent-text{font-family:BeautifulLyrics!important}
      `.trim(),document.head.appendChild(e))})()}();