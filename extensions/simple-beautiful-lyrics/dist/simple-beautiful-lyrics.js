!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(t=>setTimeout(t,10));(()=>{var o,t=class{constructor(){this.tasks=[],this.subCleanups=[]}AddTask(t,e){e&&this.Clean(e),this.tasks.push({id:e,task:t})}AddSubCleanup(t,e){return this.subCleanups.push({instance:t,id:e}),t}AddObserver(t,e){return this.AddTask(t.disconnect.bind(t),e),t}AddHtml(t,e){return this.AddTask(()=>{t.remove()},e),t}Clean(e){e?(this.tasks=this.tasks.filter(t=>t.id!==e||(t.task(),!1)),this.subCleanups=this.subCleanups.filter(t=>t.id!==e||(t.instance.Clean(),!1))):(this.tasks.forEach(t=>{t.task()}),this.subCleanups.forEach(t=>{t.instance.Clean()}),this.tasks=[])}},s=new t,r=!1;{let t,e;for(const B of document.getElementsByTagName("script"))B.src.includes("beautiful-lyrics.js")&&(B.src.includes("https://xpui.app.spotify.com/")?void 0===e?e=B:B.remove():void 0===t?t=B:B.remove());o=void 0===e?t:(r=!0,void 0!==t&&t.remove(),e)}var e,i,a,n,c=!1,l=Spicetify.Player,d=(Spicetify.showNotification,Spicetify.Platform?.History,Spicetify.Playbar,Spicetify.Snackbar),u=()=>{l=Spicetify.Player,e=Spicetify.showNotification,i=Spicetify.Platform,a=i?.History,n=Spicetify.Playbar,d=Spicetify.Snackbar,void 0!==l&&void 0!==e&&void 0!==i&&void 0!==a&&void 0!==n&&void 0!==d&&(c=!0)},f=[];var y,m=function(t,e){return t=setTimeout(()=>{e()},1e3*t),f.push(t),function(t){clearTimeout(t);t=f.indexOf(t);-1<t&&f.splice(t,1)}.bind(null,t)},h=t=>{t=t.match(/(\d+)\.(\d+)\.(\d+)(?:\.(\d+))?/);if(null!==t)return{Text:t[0],Major:parseInt(t[1]),Minor:parseInt(t[2]),Patch:parseInt(t[3]),Control:t[4]?parseInt(t[4]):void 0}},p=h("1.1.0"),b=async()=>{let a=60;fetch("https://api.github.com/repos/kamiloo13/spicetify-extensions/contents/extensions/simple-beautiful-lyrics/dist/beautiful-lyrics.js").then(t=>t.json()).then(t=>fetch("https://api.github.com/repos/kamiloo13/spicetify-extensions/git/blobs/"+t.sha)).then(t=>t.json()).then(t=>atob(t.content)).then(t=>{var e,r,i=h(t);void 0!==i&&([r,e]=((t,e)=>{e={Text:"",Major:e.Major-t.Major,Minor:e.Minor-t.Minor,Patch:e.Patch-t.Patch,Control:void 0===e.Control&&void 0===t.Control?0:void 0===e.Control||void 0===t.Control?t.Control:e.Control-t.Control};return[e,0!==e.Major||0!==e.Minor||0!==e.Patch||0!==e.Control]})(p,i),e&&(2<i.Major||2==i.Major&&4<=i.Minor)?(e=`<h3>Simple Beautiful Lyrics Updated!</h3><h4 style = 'margin-top: 4px; margin-bottom: 4px; font-weight: normal;'>No need to re-install - it's already running!</h4><span style = 'opacity: 0.75;'>Version ${p.Text} -> ${i.Text}</span>`,i=0<r.Major?"success":r.Major<0||r.Minor<0||r.Patch<0?"warning":"info",r=7.5,d.enqueueSnackbar(Spicetify.React.createElement("div",{dangerouslySetInnerHTML:{__html:e.trim()}}),{variant:i,autoHideDuration:1e3*r}),e=t,s.Clean(),document.querySelector("#simpleDbeautifulDlyrics")?.remove(),(i=document.createElement("script")).setAttribute("type","text/javascript"),i.innerHTML=e,document.body.appendChild(i),o.remove()):a=300)}).catch(t=>console.warn("Error: "+t)).finally(()=>s.AddTask(m(a,b),"CheckForUpdate"))},v=class{constructor(){this.listeners=[]}Connect(t){return this.listeners.push(t),()=>this.Disconnect(t)}Disconnect(t){t=this.listeners.indexOf(t);-1<t&&this.listeners.splice(t,1)}Fire(){this.listeners.forEach(t=>t())}},g=new class{constructor(){this.SongChanged=new v,this.Started=!1}Start(){if(!0!==this.Started){this.Started=!0;const t=()=>{this.SongChanged.Fire()};l.addEventListener("songchange",t),s.AddTask(()=>l.removeEventListener("songchange",t)),void 0!==l.data&&t()}}},S=new v,k=new Map,w=(k.set("Default","brightness(0.5) saturate(2.5)"),k.set("SidePanel","brightness(1) saturate(2.25)"),()=>{var t=l.data.item.metadata,t={Large:t.image_xlarge_url,Big:t.image_large_url,Default:t.image_url,Small:t.image_small_url};t.Default!==y?.Default&&(y=t,S.Fire())}),C=["lyrics-background-color","lyrics-background-back","lyrics-background-back-center"],L=s.AddSubCleanup(new t,"LiveBackgrounds"),M=t=>{const e=L.AddHtml(document.createElement("div")),r=(e.classList.add("lyrics-background-container"),[]);for(const s of C){var i=L.AddHtml(document.createElement("img"));i.classList.add(s),e.appendChild(i),r.push(i)}let a;a=()=>{var t=y?.Default??"";for(const e of r)e.src=t},L.AddTask(S.Connect(a)),a();var o=()=>{t.classList.contains("lyrics-background")||t.classList.add("lyrics-background")};o(),L.AddObserver(new MutationObserver(o)).observe(t,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),t.prepend(e),L.AddTask(()=>t.classList.remove("lyrics-background"))},x="lyrics-lyrics-background",A=null,E=()=>{var t=document.body.querySelector("."+x);A!==t&&(null===t?(A=null,L.Clean()):((A=t).style.display="none",M(document.body.querySelector("."+x)?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.querySelector(".under-main-view"))))},T=s.AddSubCleanup(new t,"Lyrics"),O=r=>{const n=new Map;let o=0;const c=(t,e)=>{t.style.fontSize="Active"==e.State?o+.5+"rem":""},i=()=>{let e=0;for(var[t,r]of n){t=t.classList;t.contains("lyrics-lyricsContent-active")?(r.State="Active",e=r.LayoutOrder):t.contains("lyrics-lyricsContent-unsynced")?r.State="Unsynced":t.contains("lyrics-lyricsContent-highlight")?r.State="Sung":r.State="Unsung"}let i=!0;for(var[a,o]of n){var s="Active"===o.State||"Unsynced"===o.State||e<=1&&i;let t;t=s?0:Math.min(Math.abs(o.LayoutOrder-e),4);s=s?"var(--lyrics-color-active)":"Sung"===o.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";!1===a.classList.contains("lyric")&&a.classList.add("lyric"),c(a,o),a.style.color="transparent",a.style.textShadow=`0 0 ${t}px `+s,i=!1}};let s;const e=a=>{var t=Array.from(r.children).indexOf(a);T.AddObserver(new MutationObserver(i)).observe(a,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1});let e=!1;void 0===s&&0===a.innerText.length&&((s=T.AddObserver(new ResizeObserver(()=>{var t,e,r,i;o=(t=a,t=getComputedStyle(a),e=getComputedStyle(document.documentElement),parseFloat(t.fontSize)/parseFloat(e.fontSize));for([r,i]of n)c(r,i)}))).observe(a),e=!0),n.set(a,{LayoutOrder:t,State:"Unsung",IsFontSizeObserver:e}),i()},a=t=>{t instanceof HTMLDivElement&&t.classList.contains("lyrics-lyricsContent-lyric")&&e(t)};T.AddObserver(new MutationObserver(t=>t.forEach(t=>t.addedNodes.forEach(a)))).observe(r,{attributes:!1,childList:!0,subtree:!1});for(const t of r.childNodes)a(t)},D="lyrics-lyrics-contentWrapper",P=null,j=()=>{var t=document.body.querySelector("."+D);P!==t&&(P=null,T.Clean(),t)&&O(P=t)};var _=async function(){for(;!c&&!u();)await new Promise(t=>setTimeout(t,100));!1===r?(console.log("[simple-beautiful-lyrics] AutoUpdater: Checking for Updates"),b()):console.log("[simple-beautiful-lyrics] AutoUpdater: Development Mode - Skipping Update Check"),s.AddTask(g.SongChanged.Connect(w)),w(),g.Start(),s.AddObserver(new MutationObserver(()=>{E(),j()})).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),E(),j()};(async()=>{await _()})()})();(async()=>{var t;document.getElementById("simpleDbeautifulDlyrics")||((t=document.createElement("style")).id="simpleDbeautifulDlyrics",t.textContent=String.raw`
  .lyric:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important}.lyrics-lyricsContent-active{margin-top:.25em;margin-bottom:.25em}#lyrics-cinema .os-scrollbar,.Root__main-view:has(.lyrics-background) .os-scrollbar,.os-host:has(.lyrics-background) .os-scrollbar{padding:5px}#lyrics-cinema .os-scrollbar .os-scrollbar-handle,.Root__main-view:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle,.os-host:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle{mix-blend-mode:overlay;background-color:rgba(252,249,249,.117)!important}.lyrics-lyrics-container,.main-nowPlayingView-section{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important}.lyrics-background{overflow:hidden;position:static}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-back-center,.lyrics-background-color{position:absolute;width:200%;animation:rotate 35s linear infinite;filter:blur(40px);border-radius:100em}.lyrics-background-color{right:0;top:0;z-index:10}.lyrics-background-back{left:0;bottom:0;z-index:1;animation-direction:reverse}.lyrics-background-back-center{z-index:0;width:300%;right:-50%;top:-20%;animation-direction:reverse}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}:root{--beautiful-lyrics-random-degree:258deg}@keyframes rotate{0%{transform:rotate(var(--beautiful-lyrics-random-degree))}100%{transform:rotate(calc(var(--beautiful-lyrics-random-degree) + 360deg))}}@font-face{font-family:BeautifulLyrics;font-weight:400;src:url(https://fonts.socalifornian.live/LyricsRegular.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:500;src:url(https://fonts.socalifornian.live/LyricsMedium.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:600;src:url(https://fonts.socalifornian.live/LyricsSemibold.woff2) format("woff2")}@font-face{font-family:BeautifulLyrics;font-weight:700;src:url(https://fonts.socalifornian.live/LyricsBold.woff2) format("woff2")}.lyrics-lyricsContent-text{font-family:BeautifulLyrics!important}
      `.trim(),document.head.appendChild(t))})()}();