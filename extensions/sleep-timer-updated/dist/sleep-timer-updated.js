!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var n,i,o,l,a,s,e,t,r,c,p,f,u,x,m,d,g,b,y,v,h;n=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,a=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,t=(e,t,r)=>(r=null!=e?n(a(e)):{},((t,r,n,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let e of l(r))s.call(t,e)||e===n||i(t,e,{get:()=>r[e],enumerable:!(a=o(r,e))||a.enumerable});return t})(!t&&e&&e.__esModule?r:i(r,"default",{value:e,enumerable:!0}),e)),r=(e=(e,t)=>function(){return t||(0,e[l(e)[0]])((t={exports:{}}).exports,t),t.exports})({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),e=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),c=t(r()),p=t(e()),f=t(r()),u=t(r()),x=({numericValue:e,setNumericValue:t,radioValue:r,setRadioValue:n,idTextValue:a})=>{let[i,o]=(0,u.useState)(null);let l=e=>{t(Math.max(Math.min(e,999),1))},s=r=>{r();var e=setTimeout(function e(){r();var t=setTimeout(e,35);o(t)},500);o(e)};var c=()=>{i&&(clearInterval(i),clearTimeout(i),o(null))};return u.default.createElement("div",{className:"input-wrapper-flex"},u.default.createElement("input",{className:"check-input",type:"radio",id:"sleep-after-"+a,name:"sleep-after",value:a,checked:r===a,onChange:e=>{n(e.target.value)}}),u.default.createElement("label",{htmlFor:"sleep-after-"+a},u.default.createElement("p",null,"Sleep after"),u.default.createElement("div",{className:"input-group"},u.default.createElement("button",{style:{minWidth:"2.5rem"},className:"btn btn-field-change",onMouseDown:()=>s(()=>(l(--e),n(a))),onMouseUp:c},u.default.createElement("strong",null,"âˆ’")),u.default.createElement("input",{type:"text",value:e,onChange:e=>l(parseInt(e.target.value)||0),onKeyDown:w,onPaste:e=>e.preventDefault(),autoComplete:"off"}),u.default.createElement("button",{style:{minWidth:"2.5rem"},className:"btn btn-field-change",onMouseDown:()=>s(()=>(l(++e),n(a))),onMouseUp:c},u.default.createElement("strong",null,"+"))),u.default.createElement("p",null,a,"(s)")))},m=({isVisible:e,updateDom:t,setIsMenuActive:r,sleepTimerButton:a})=>{let[n,i]=(0,f.useState)(1),[o,l]=(0,f.useState)(30),[s,c]=(0,f.useState)("disabled"),[p,u]=(0,f.useState)(""),m=(0,f.useRef)({type:"disabled",count:0}),d=((0,f.useEffect)(()=>{let e=()=>{var e=m.current;"song"===e.type&&(1<e.count?(d({type:"song",count:e.count-1}),a.label=`${e.count-1} song${e.count-1==1?"":"s"} remaining`):(b(),Spicetify.Player.isPlaying()&&Spicetify.Player.pause()))};return Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e)}},[]),e=>{m.current={...m.current,...e},t()});function g(e,t){var t=(60*t*1e3-(Date.now()-e))/1e3,e=Math.floor(t/3600),r=Math.floor(t%3600/60),n=Math.floor(t%60),e=0<e?`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:`+n.toString().padStart(2,"0"):r.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0");u(e),a.label=e+" remaining",t<=0&&(b(),Spicetify.Player.isPlaying())&&Spicetify.Player.pause()}function b(){clearInterval(m.current.timer),d({type:"disabled",count:0}),a.label="Sleep Timer"}return e?f.default.createElement("div",{id:"sleep-timer-menu"},f.default.createElement("div",{style:{maxHeight:"calc(100vh - 90px)",padding:"5px"}},f.default.createElement("div",{className:"header"},f.default.createElement("h3",null,"Sleep Timer")),f.default.createElement("div",{className:"inputs-wrapper"},f.default.createElement(x,{idTextValue:"song",setNumericValue:i,setRadioValue:c,numericValue:n,radioValue:s}),f.default.createElement(x,{idTextValue:"minute",setNumericValue:l,setRadioValue:c,numericValue:o,radioValue:s})),f.default.createElement("button",{type:"button",className:"disabled"===m.current.type?"btn btn-success":"btn btn-primary",id:"sleep-timer-start",disabled:"disabled"===s,onClick:function(){var e,t;"disabled"!=m.current.type?b():(r(!1),a.label="song"==s?`${n} song${1==n?"":"s"} remaining`:"Sleep Timer","minute"==s?(e=Date.now(),t=setInterval(g,1e3,e,o),g(e-200,o),d({type:s,count:o,timer:t})):"song"==s&&d({type:s,count:n}))}},"disabled"===m.current.type?"Start Timer":"Stop Timer "+("song"===m.current.type?`(${m.current.count} song${1==m.current.count?"":"s"} remaining)`:`(${p} remaining)`)))):null},(d=document.createElement("div")).id="sleep-timer-container",d.style.position="relative",g=new Spicetify.Playbar.Button("Sleep Timer",'<svg class="Svg-sc-ytk21e-0 Svg-img-icon-small" xml:space="preserve" viewBox="0 0 1000 1000" y="0px" x="0px" height="16px" width="16px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="M525.3,989.5C241.2,989.5,10,758.3,10,474.1c0-196.8,109.6-373.6,285.9-461.4c7.9-3.9,17.5-2.4,23.7,3.8c6.2,6.2,7.9,15.8,4,23.7c-32.2,65.4-48.5,135.7-48.5,208.9c0,261.4,212.7,474.1,474.1,474.1c74,0,145-16.7,211-49.5c7.9-3.9,17.5-2.4,23.7,3.8c6.3,6.3,7.9,15.8,3.9,23.7C900.5,879,723.3,989.5,525.3,989.5z"></path></svg>',()=>y(!b)),b=!1,y=e=>{b=e,g.active=e,v()},v=()=>{p.default.render(c.default.createElement(m,{isVisible:b,setIsMenuActive:y,updateDom:v,sleepTimerButton:g}),d)},h=async function(){for(;!g?.element?.parentElement;)await new Promise(e=>setTimeout(e,100));var e=g.element.parentElement;e?(document.addEventListener("mouseup",e=>{if(0!=e.button)return!1;var t=document.querySelector("div#sleep-timer-container");t&&e.target&&(t.contains(e.target)||g.element.contains(e.target)||y(!1))}),e.insertBefore(d,g.element),v()):(console.error("[sleep-timer-updated] Failed to find parent element for sleep timer button"),g.deregister())},(async()=>{await h()})();function w(e){"0"<=e.key&&e.key<="9"||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||e.preventDefault()}(async()=>{var e;document.getElementById("sleepDtimerDupdated")||((e=document.createElement("style")).id="sleepDtimerDupdated",e.textContent=String.raw`
  @import url(https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap);:root{--sleep-timer-font-family:"Open Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--sleep-timer-primary-color-bg:#882115;--sleep-timer-primary-color-font:var(--spice-text)}#sleep-timer-menu{max-width:450px;min-width:350px;animation:fadeIn 333ms cubic-bezier(.3,0,0,1);background:var(--spice-card);border-radius:5px;bottom:29px;box-shadow:0 4px 12px 4px rgba(var(--spice-rgb-shadow),.5);position:absolute;right:-153px;z-index:1002}#sleep-timer-menu:before{border:10px solid transparent;border-top-color:var(--spice-card);bottom:-20px;content:"";left:auto;margin-left:-10px;margin-right:-10px;position:absolute;right:138px}#sleep-timer-menu .header{font-size:1.125rem;text-align:center;padding:14px 0 10px 0;color:var(--spice-text);font-family:var(--sleep-timer-font-family)}#sleep-timer-menu .inputs-wrapper{padding:20px 15px}#sleep-timer-menu .check-input{width:1em;height:1em;background-color:var(--spice-text)!important;background-repeat:no-repeat;background-position:center;background-size:contain;border:1px solid rgba(0,0,0,.25);-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0;padding:0;border-radius:50%!important;font-size:1rem}#sleep-timer-menu .check-input:focus{outline:0;box-shadow:0 0 0 .25rem rgba(30,215,96,.25)}#sleep-timer-menu .check-input:checked{background-color:var(--spice-button-active)!important;border-color:var(--spice-button-active)}#sleep-timer-menu .check-input:checked[type=radio]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='2' fill='%23fff'/%3e%3c/svg%3e")}#sleep-timer-menu .btn{display:inline-block;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:1px solid transparent;border-radius:.375rem;background-color:transparent;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}#sleep-timer-menu .btn-success{background:var(--spice-button-active);filter:none;border:1px solid var(--spice-button-active);color:var(--spice-sidebar)}#sleep-timer-menu .btn-success:disabled{pointer-events:none;background:var(--spice-button);border:1px solid var(--spice-button);opacity:.65}#sleep-timer-menu .btn-primary{background:var(--sleep-timer-primary-color-bg);filter:none;border:1px solid var(--sleep-timer-primary-color-bg);color:var(--sleep-timer-primary-color-font)}#sleep-timer-menu .btn#sleep-timer-start{margin:10px 10px;width:calc(100% - 20px)}#sleep-timer-menu label{display:flex;flex-direction:row;align-items:center}#sleep-timer-menu label p{margin:0 .25em;font-family:var(--sleep-timer-font-family)}#sleep-timer-menu .input-wrapper-flex{display:flex;flex-direction:row;align-items:center}#sleep-timer-menu .input-wrapper-flex:nth-child(2){margin-top:20px}#sleep-timer-menu .input-group{position:relative;display:flex;flex-direction:row;align-items:stretch;width:127px}#sleep-timer-menu .input-group input{margin:0 -1px;position:relative;flex:1 1 auto;width:1%;min-width:0;display:block;padding:.375rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--spice-text);background-color:var(--spice-card)!important;background-clip:padding-box;border:1px solid var(--spice-text);-webkit-appearance:none;-moz-appearance:none;appearance:none;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;border-radius:0!important;text-align:center}#sleep-timer-menu .input-group input:focus{color:#212529;border-color:#a2f2be;outline:0;box-shadow:0 0 0 .25rem rgba(30,215,96,.25)}#sleep-timer-menu .btn-field-change{color:var(--spice-subtext);border-color:var(--spice-text);display:inline-block;font-size:1rem;font-weight:400;line-height:1.5;border-radius:.375rem;text-align:center;text-decoration:none;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}#sleep-timer-menu .btn-field-change strong{font-weight:bolder}#sleep-timer-menu .btn-field-change:hover{color:rgba(30,215,96,.25);background-color:rgba(30,215,96,.25)}#sleep-timer-menu .btn-field-change:first-child{border-top-right-radius:0;border-bottom-right-radius:0}#sleep-timer-menu .btn-field-change:last-child{border-top-left-radius:0;border-bottom-left-radius:0}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
      `.trim(),document.head.appendChild(e))})()}();